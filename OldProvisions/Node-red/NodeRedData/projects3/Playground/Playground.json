[{"id":"cc496f63.25eb38","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"e1b8ebb0.8dbef8","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"71443717.2ecc38","type":"tab","label":"Cookbook","disabled":true,"info":"https://cookbook.nodered.org/"},{"id":"773de26a.d88abc","type":"tab","label":"Node-RED Design Patterns","disabled":true,"info":"https://medium.com/node-red/node-red-design-patterns-893331422f42"},{"id":"8d282198.12b318","type":"tab","label":"Flow 3","disabled":false,"info":""},{"id":"8f74a46.3c73858","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"c0779c97.bf3678","type":"mongodb2","z":"","uri":"mongodb://localhost:27017/db","name":"db","options":"","parallelism":"-1"},{"id":"137c828a.e48d6d","type":"mongodb2","z":"","uri":"mongodb://localhost:27017/db","name":"db","options":"","parallelism":"-1"},{"id":"1e59f75a.ccc3f1","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":140,"y":200,"wires":[["c5ce7d63.d603e8"]]},{"id":"c5ce7d63.d603e8","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Hello World!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":339.00001525878906,"y":200,"wires":[["896da36a.5fb1d"]]},{"id":"896da36a.5fb1d","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":550,"y":200,"wires":[]},{"id":"319dfd28.3560ea","type":"comment","z":"71443717.2ecc38","name":"Set a message property to a fixed value","info":"Problem\n\nYou want to set a message property to a fixed value.\nSolution\n\nUse the Change node to set the property of the message.\nExample\n\n[{\"id\":\"d72dc4ce.89b368\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":80,\"wires\":[[\"78075f19.e0174\"]]},{\"id\":\"78075f19.e0174\",\"type\":\"change\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"rules\":[{\"t\":\"set\",\"p\":\"payload\",\"pt\":\"msg\",\"to\":\"Hello World!\",\"tot\":\"str\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":340,\"y\":80,\"wires\":[[\"78dc7c25.b90d54\"]]},{\"id\":\"78dc7c25.b90d54\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":550,\"y\":80,\"wires\":[]}]\n\nDiscussion\n\nThe Change node can be used to set properties of a message.\n\nThe node supports setting various JavaScript types as well as some Node-RED specific types.\n\n    strings: \"hello world\"\n    numbers: 42\n    boolean: true/false\n    timestamp: the current time, in milliseconds, since epoch (January 1st, 1970)\n    JSON: a JSON string that will be parsed to its Object representation\n    Buffer: a Node.js Buffer object\n\nIt also supports setting a property to a value based on the value of context properties, other message properties or a JSONata expression.","x":207.29998779296875,"y":152.8000030517578,"wires":[]},{"id":"dc3b8acd.137e18","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":139,"y":299,"wires":[["4be6dab8.8cd07c"]]},{"id":"4be6dab8.8cd07c","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":349,"y":299,"wires":[["e4204db5.97b55"]]},{"id":"e4204db5.97b55","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":549,"y":299,"wires":[]},{"id":"ef3ca282.6ba28","type":"comment","z":"71443717.2ecc38","name":"Delete a message property","info":"You want to delete a message property.\nSolution\n\nUse the Change node to delete the property.\nExample\n\n[{\"id\":\"91cd2fa9.e0a96\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":180,\"wires\":[[\"54ec03e4.5714bc\"]]},{\"id\":\"54ec03e4.5714bc\",\"type\":\"change\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"rules\":[{\"t\":\"delete\",\"p\":\"payload\",\"pt\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":350,\"y\":180,\"wires\":[[\"321900de.3cbea\"]]},{\"id\":\"321900de.3cbea\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":550,\"y\":180,\"wires\":[]}]\n\nDiscussion\n\nThe Change node can be used to delete properties of a message.","x":165.29998779296875,"y":246.8000030517578,"wires":[]},{"id":"efc50f08.0fbe9","type":"inject","z":"71443717.2ecc38","name":"","topic":"Hello","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":157,"y":411.00001525878906,"wires":[["3cf7bf8b.55065"]]},{"id":"3cf7bf8b.55065","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"move","p":"topic","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":348.00001525878906,"y":411.00001525878906,"wires":[["c8d87e58.a304d"]]},{"id":"c8d87e58.a304d","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":547,"y":411.00001525878906,"wires":[]},{"id":"d01c20b7.a25588","type":"comment","z":"71443717.2ecc38","name":"Move a message property","info":"Move a message property\nProblem\n\nYou want to move a message property to a different property.\nSolution\n\nUse the Change node to move a property.\nExample\n\n[{\"id\":\"d11f7311.77c15\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"Hello\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":160,\"y\":280,\"wires\":[[\"13c01487.eb13cb\"]]},{\"id\":\"13c01487.eb13cb\",\"type\":\"change\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"rules\":[{\"t\":\"move\",\"p\":\"topic\",\"pt\":\"msg\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":360,\"y\":280,\"wires\":[[\"89cc4fb1.9b208\"]]},{\"id\":\"89cc4fb1.9b208\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":550,\"y\":280,\"wires\":[]}]\n\nDiscussion\n\nThe Change node can be used to move a property of a message.\n\nIt can be done as two separate actions in the Change node; first using a Set action to copy the property to its new location and then a Delete action to remove the original.\n\nAlternatively, the node supports a Move action that does it in one step.","x":164.29998779296875,"y":355.79998779296875,"wires":[]},{"id":"99591268.ef092","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":false,"x":126.00001525878906,"y":523.8000030517578,"wires":[["fd51886c.9f3be"]]},{"id":"fd51886c.9f3be","type":"range","z":"71443717.2ecc38","minin":"0","maxin":"1023","minout":"0","maxout":"5","action":"clamp","round":false,"name":"","x":346.00001525878906,"y":563.8000030517578,"wires":[["21dee9b1.b1cc0e"]]},{"id":"3a626623.43c37a","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"512","payloadType":"num","repeat":"","crontab":"","once":false,"x":126.00001525878906,"y":563.8000030517578,"wires":[["fd51886c.9f3be"]]},{"id":"76a070bc.28b918","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"1023","payloadType":"num","repeat":"","crontab":"","once":false,"x":126.00001525878906,"y":603.8000030517578,"wires":[["fd51886c.9f3be"]]},{"id":"21dee9b1.b1cc0e","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":546.0000152587891,"y":563.8000030517578,"wires":[]},{"id":"c59f61f.cd9d42","type":"comment","z":"71443717.2ecc38","name":"Map a property between different numeric ranges","info":"\nProblem\n\nYou want to scale a number from one numeric range to another. For example, a sensor reading in the range 0 - 1023 should be mapped to a voltage range of 0 - 5.\nSolution\n\nUse the Range node to map between the defined ranges.\nExample\n\n[{\"id\":\"80dae67d.b4d8f8\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"0\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":130,\"y\":380,\"wires\":[[\"81f13534.456348\"]]},{\"id\":\"81f13534.456348\",\"type\":\"range\",\"z\":\"535331d8.55c1f\",\"minin\":\"0\",\"maxin\":\"1023\",\"minout\":\"0\",\"maxout\":\"5\",\"action\":\"clamp\",\"round\":false,\"name\":\"\",\"x\":350,\"y\":420,\"wires\":[[\"e80b61d7.4b399\"]]},{\"id\":\"cb21de23.75a2f\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"512\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":130,\"y\":420,\"wires\":[[\"81f13534.456348\"]]},{\"id\":\"342552de.255a1e\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"1023\",\"payloadType\":\"num\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":130,\"y\":460,\"wires\":[[\"81f13534.456348\"]]},{\"id\":\"e80b61d7.4b399\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":550,\"y\":420,\"wires\":[]}]\n\nDiscussion\n\nThe Range node can be used to linearly scale between two different numberic ranges.\n\nBy default, the result is not constrained to the range defined in the node. This means using the voltage example above, a value of 2046 would map to a result of 10.\n\nThe node can be configured to constrain the result to the target range, or apply simple modulo arithmetic so the value wraps within the target range.","x":233.29998779296875,"y":471.79998779296875,"wires":[]},{"id":"f42e28b8.814fa8","type":"comment","z":"71443717.2ecc38","name":"Trigger a flow whenever Node-RED starts","info":"\nProblem\n\nYou want to trigger a flow whenever Node-RED starts.\n\nThis could be used to initialise context variables, or to send a notification that Node-RED has been restarted.\nSolution\n\nUse an Inject node configured to fire once on start.\nExample\n\n[{\"id\":\"e60b12c1.93bb3\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"Started!\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"\",\"once\":true,\"x\":140,\"y\":540,\"wires\":[[\"9b1d7727.56d0f8\"]]},{\"id\":\"9b1d7727.56d0f8\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":410,\"y\":540,\"wires\":[]}]\n\nDiscussion\n\nWhen configured to fire on start, the Inject node will be automatically triggered a few hundred milliseconds after it is deployed. This delay is used to help ensure the rest of the flows have been created and Started by this point.\n\nThe node will trigger whenever it is deployed.","x":206.29998779296875,"y":662.8000030517578,"wires":[]},{"id":"d7b4008b.3f496","type":"comment","z":"71443717.2ecc38","name":"Trigger a flow at regular intervals","info":"\nProblem\n\nYou want to trigger a flow at regular intervals. For example, to periodically call an api to retrieve its current state.\nSolution\n\nUse an Inject node configured to repeat at the desired interval.\nExample\n\n[{\"id\":\"372cfc32.bcd244\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"5\",\"crontab\":\"\",\"once\":false,\"x\":150,\"y\":600,\"wires\":[[\"6c63c499.ce3adc\"]]},{\"id\":\"6c63c499.ce3adc\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":410,\"y\":600,\"wires\":[]}]\n\nDiscussion\n\nThe Inject node can be configured to repeat at a fixed interval. If desired, it can also be constrained to do so between certain times on certain days.","x":175.29998779296875,"y":775.8000030517578,"wires":[]},{"id":"4550f33d.9b4a84","type":"comment","z":"71443717.2ecc38","name":"Trigger a flow at a specific time","info":"\nProblem\n\nYou want to trigger a flow at a specific time, such as at 4pm every weekday.\nSolution\n\nUse an Inject node configured to trigger at the desired time.\nExample\n\n[{\"id\":\"24579bcb.5c9814\",\"type\":\"inject\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"topic\":\"\",\"payload\":\"It is 4pm on a weekday!\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"00 16 * * 1,2,3,4,5\",\"once\":false,\"x\":190,\"y\":660,\"wires\":[[\"145b508a.f3325f\"]]},{\"id\":\"145b508a.f3325f\",\"type\":\"debug\",\"z\":\"535331d8.55c1f\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":410,\"y\":660,\"wires\":[]}]\n\nDiscussion\n\nThe Inject node can be configured to trigger at a specific time on specific days of the week.\n\nIf multiple different times are required, multiple Inject nodes should be used.","x":174.29998779296875,"y":894.8000030517578,"wires":[]},{"id":"a44bef83.80add","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"Started!","payloadType":"str","repeat":"","crontab":"","once":true,"x":130.00001525878906,"y":710.8000030517578,"wires":[["fd7c60d2.d364a"]]},{"id":"fd7c60d2.d364a","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":400.00001525878906,"y":710.8000030517578,"wires":[]},{"id":"96eda14b.e9f18","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"5","crontab":"","once":false,"x":135,"y":839.8000030517578,"wires":[["c1481c1.e6a9f6"]]},{"id":"c1481c1.e6a9f6","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":395,"y":839.8000030517578,"wires":[]},{"id":"db7a2f6e.4f8338","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"It is 4pm on a weekday!","payloadType":"str","repeat":"","crontab":"00 16 * * 1,2,3,4,5","once":false,"x":173.00001525878906,"y":951.8000030517578,"wires":[["f0c2184d.01688"]]},{"id":"f0c2184d.01688","type":"debug","z":"71443717.2ecc38","name":"","active":false,"console":"false","complete":"false","x":393.00001525878906,"y":951.8000030517578,"wires":[]},{"id":"df3b4a8e.fd0e6","type":"comment","z":"71443717.2ecc38","name":"https://cookbook.nodered.org/","info":"","x":160,"y":40,"wires":[]},{"id":"48d490b8.58c","type":"comment","z":"71443717.2ecc38","name":"1 Basic recipes","info":"","x":130.5,"y":96,"wires":[]},{"id":"1369a1d4.5ca136","type":"comment","z":"71443717.2ecc38","name":"Create an HTTP Endpoint","info":"\nProblem\n\nYou want to create an HTTP endpoint that responds to GET requests with some static content, such as an HTML page or CSS stylesheet.\nSolution\n\nUse the HTTP In node to listen for requests, a Template node to include the static content, and an HTTP Response node to reply to the request.\nExample\n\n[{\"id\":\"59ff2a1.fa600d4\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":100,\"y\":80,\"wires\":[[\"54c1e70d.ab3e18\"]]},{\"id\":\"54c1e70d.ab3e18\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello World!</h1>\\n    </body>\\n</html>\",\"x\":250,\"y\":80,\"wires\":[[\"266c286f.d993d8\"]]},{\"id\":\"266c286f.d993d8\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":390,\"y\":80,\"wires\":[]}]\n\n[~]$ curl http://localhost:1880/hello\n<html>\n    <head></head>\n    <body>\n        <h1>Hello World!</h1>\n    </body>\n</html>\n\nDiscussion\n\nThe HTTP In and HTTP Response pair of nodes are the starting point for all HTTP endpoints you create.\n\nAny flow that starts with an HTTP In node must have a path to an HTTP Response node otherwise requests will eventually timeout.\n\nThe HTTP Response node uses the payload property of messages it receives as the body of the response. Other properties can be used to further customize the response - they are covered in other recipes.\n\nThe Template node provides a convenient way to embed a body of content into a flow. It may be desirable to maintain such static content outside of the flow.","x":150,"y":1080,"wires":[]},{"id":"75ad1de2.5e27f4","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello","method":"get","upload":false,"swaggerDoc":"","x":97.70001220703125,"y":1125.1999969482422,"wires":[["5935cdc6.bf39ac"]]},{"id":"5935cdc6.bf39ac","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello World!</h1>\n    </body>\n</html>","x":247.70001220703125,"y":1125.1999969482422,"wires":[["14106cf8.459b73"]]},{"id":"14106cf8.459b73","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":387.70001220703125,"y":1125.1999969482422,"wires":[]},{"id":"e06b37d3.01f1f8","type":"comment","z":"71443717.2ecc38","name":"Handle query parameters passed to an HTTP endpoint","info":"\nProblem\n\nYou want to access the query parameters passed to an HTTP endpoint, such as:\n\nhttp://example.com/hello-query?name=Nick\n\nSolution\n\nUse the msg.req.query property of the message sent by the HTTP In node to access the parameters.\nExample\n\n[{\"id\":\"b34dd1af.4cb23\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello {{req.query.name}}!</h1>\\n    </body>\\n</html>\",\"x\":290,\"y\":180,\"wires\":[[\"b828f6a6.47d708\"]]},{\"id\":\"1052941d.efad6c\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-query\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":120,\"y\":180,\"wires\":[[\"b34dd1af.4cb23\"]]},{\"id\":\"b828f6a6.47d708\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":430,\"y\":180,\"wires\":[]}]\n\n[~]$ curl http://localhost:1880/hello-query?name=Nick\n<html>\n    <head></head>\n    <body>\n        <h1>Hello Nick!</h1>\n    </body>\n</html>\n\nDiscussion\n\nThe msg.req.query property is an object of key/value pairs for each query parameter.\n\nIn the above example, a request to /hello-query?name=Nick&colour=blue results in the property containing:\n\n{\n    \"name\": \"Nick\",\n    \"colour\": \"blue\"\n}\n\nIf there are multiple query parameters with the same name, they will be provided as an array. For example, /hello-query?colour=blue&colour=red:\n\n{\n    \"colour\": [\"blue\",\"red\"]\n}","x":239,"y":1172,"wires":[]},{"id":"4faf2c84.7fdccc","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello {{req.query.name}}!</h1>\n    </body>\n</html>","x":287.70001220703125,"y":1222.1999969482422,"wires":[["5947b092.cc368"]]},{"id":"68dca907.fb1428","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-query","method":"get","upload":false,"swaggerDoc":"","x":117.70001220703125,"y":1222.1999969482422,"wires":[["4faf2c84.7fdccc"]]},{"id":"5947b092.cc368","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":427.70001220703125,"y":1222.1999969482422,"wires":[]},{"id":"6d11d828.aed8","type":"comment","z":"71443717.2ecc38","name":"Handle url parameters in an HTTP endpoint","info":"\nProblem\n\nYou want to create a single HTTP endpoint that can handle requests where parts of the path are set per-request.\n\nFor example, a single endpoint that can handle requests to both:\n\nhttp://example.com/hello-param/Nick\nhttp://example.com/hello-param/Dave\n\nSolution\n\nUse named path parameters in your HTTP In nodeâ€™s URL property and then access the specific value provided in a request using the msg.req.params property of the message.\nFlow\n\n[{\"id\":\"ce53954b.31ac68\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":490,\"y\":280,\"wires\":[]},{\"id\":\"288a7c0.fd77584\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello {{req.params.name}}!</h1>\\n    </body>\\n</html>\",\"x\":350,\"y\":280,\"wires\":[[\"ce53954b.31ac68\"]]},{\"id\":\"7665c67d.899a38\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-param/:name\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":150,\"y\":280,\"wires\":[[\"288a7c0.fd77584\"]]}]\n\nExample\n\n[~]$ curl http://localhost:1880/hello-param/Nick\n<html>\n    <head></head>\n    <body>\n        <h1>Hello Nick!</h1>\n    </body>\n</html>\n\nDiscussion\n\nNamed path parameters in the URL property can be used to identify parts of the path that can vary between requests.\n\nThe msg.req.params property is an object of key/value pairs for each path parameter.\n\nIn the above example, the node is configured with a URL of /hello-params/:name, so a request to /hello-param/Nick results in the msg.req.params property containing:\n\n{\n    \"name\": \"Nick\"\n}","x":210,"y":1270.999984741211,"wires":[]},{"id":"f1c4f2fd.79607","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":489.70001220703125,"y":1321.000015258789,"wires":[]},{"id":"8f0fde10.577998","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello {{req.params.name}}!</h1>\n    </body>\n</html>","x":349.70001220703125,"y":1321.000015258789,"wires":[["f1c4f2fd.79607"]]},{"id":"44a3b32a.c30034","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-param/:name","method":"get","upload":false,"swaggerDoc":"","x":149.70001220703125,"y":1321.000015258789,"wires":[["8f0fde10.577998"]]},{"id":"bc427f43.125358","type":"comment","z":"71443717.2ecc38","name":"Access HTTP request headers","info":"\nProblem\n\nYou want to access the HTTP headers sent in a request.\nSolution\n\nUse the msg.req.headers property of the message sent by the HTTP In node to access the headers.\nExample\n\n[{\"id\":\"c1460268.3eba\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-headers\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":130,\"y\":380,\"wires\":[[\"24199456.dbe66c\"]]},{\"id\":\"24199456.dbe66c\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>User agent: {{req.headers.user-agent}}</h1>\\n    </body>\\n</html>\",\"x\":310,\"y\":380,\"wires\":[[\"b3531892.4cace8\"]]},{\"id\":\"b3531892.4cace8\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":450,\"y\":380,\"wires\":[]}]\n\n[~]$ curl http://localhost:1880/hello-headers\n<html>\n    <head></head>\n    <body>\n        <h1>User agent: curl&#x2F;7.49.1</h1>\n    </body>\n</html>\n\nDiscussion\n\nThe msg.req.headers property is an object of key/value pairs for each request header. The header names are all lower-cased regardless of how they appear in the request.","x":170,"y":1367.999984741211,"wires":[]},{"id":"5cc66fb4.77c1","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-headers","method":"get","upload":false,"swaggerDoc":"","x":128.6999969482422,"y":1418.000015258789,"wires":[["3e55c5ae.0fa202"]]},{"id":"3e55c5ae.0fa202","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>User agent: {{req.headers.user-agent}}</h1>\n    </body>\n</html>","x":308.6999969482422,"y":1418.000015258789,"wires":[["581433b.b4469cc"]]},{"id":"581433b.b4469cc","type":"http response","z":"71443717.2ecc38","name":"","x":448.6999969482422,"y":1418.000015258789,"wires":[]},{"id":"ddd5fae1.bac0c8","type":"comment","z":"71443717.2ecc38","name":"Include data captured in another flow","info":"\nProblem\n\nYou want to respond to an HTTP request using data captured by another flow.\nSolution\n\nStore data using flow context so that it can be retrieved within the HTTP flow.\nExample\n\n[{\"id\":\"92eaf6c0.6d1508\",\"type\":\"inject\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":100,\"y\":480,\"wires\":[[\"8055b557.7faa48\"]]},{\"id\":\"8055b557.7faa48\",\"type\":\"change\",\"z\":\"3045204d.cfbae\",\"name\":\"Store time\",\"rules\":[{\"t\":\"set\",\"p\":\"timestamp\",\"pt\":\"flow\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":270,\"y\":480,\"wires\":[[]]},{\"id\":\"93bf2335.6c40e\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-data\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":120,\"y\":520,\"wires\":[[\"9e3aa25e.61c56\"]]},{\"id\":\"9e3aa25e.61c56\",\"type\":\"change\",\"z\":\"3045204d.cfbae\",\"name\":\"Copy time\",\"rules\":[{\"t\":\"set\",\"p\":\"timestamp\",\"pt\":\"msg\",\"to\":\"timestamp\",\"tot\":\"flow\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":310,\"y\":520,\"wires\":[[\"f2c385a.f0d3c78\"]]},{\"id\":\"f2c385a.f0d3c78\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Time: {{ timestamp }}</h1>\\n    </body>\\n</html>\",\"x\":470,\"y\":520,\"wires\":[[\"def756a1.2108a8\"]]},{\"id\":\"def756a1.2108a8\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":610,\"y\":520,\"wires\":[]}]\n\n[~]$ curl http://localhost:1880/hello-data\n<html>\n    <head></head>\n    <body>\n        <h1>Time: 1480201022517</h1>\n    </body>\n</html>\n\nDiscussion\n\nThere are many different ways data can be stored and retrieved within a flow. For example, using an external database.\n\nNode-RED provides the flow context as a simple key/value store that is accessible to all nodes on the same tab.\n\nThe example above stores a timestamp generated by an Inject node into flow context using a Change node. The flow that handles the HTTP request then uses another Change node to retrieve the value, attaching it to the message which is then passed to a Template node to generate the response.","x":178,"y":1461.999984741211,"wires":[]},{"id":"7657376e.e2569","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":123.69999694824219,"y":1515.2000122070312,"wires":[["2b887c11.c93b7c"]]},{"id":"2b887c11.c93b7c","type":"change","z":"71443717.2ecc38","name":"Store time","rules":[{"t":"set","p":"timestamp","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":293.6999969482422,"y":1515.2000122070312,"wires":[[]]},{"id":"6be726a7.e193c","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-data","method":"get","upload":false,"swaggerDoc":"","x":143.6999969482422,"y":1555.2000122070312,"wires":[["4922914a.97d388"]]},{"id":"4922914a.97d388","type":"change","z":"71443717.2ecc38","name":"Copy time","rules":[{"t":"set","p":"timestamp","pt":"msg","to":"timestamp","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":333.6999969482422,"y":1555.2000122070312,"wires":[["345eeba8.60318c"]]},{"id":"345eeba8.60318c","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Time: {{ timestamp }}</h1>\n    </body>\n</html>","x":493.6999969482422,"y":1555.2000122070312,"wires":[["d3b2db8.98461a8"]]},{"id":"d3b2db8.98461a8","type":"http response","z":"71443717.2ecc38","name":"","x":633.6999969482422,"y":1555.2000122070312,"wires":[]},{"id":"c4f509a.8f7f8f8","type":"comment","z":"71443717.2ecc38","name":"Serve JSON content","info":"Serve JSON content\nProblem\n\nYou want to respond to an HTTP request with JSON data.\nSolution\n\nSet the content-type of the response to application/json using the msg.headers object.\nExample\n\n[{\"id\":\"c8107088.37ef9\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-json\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":120,\"y\":620,\"wires\":[[\"4e8237da.b17dc8\"]]},{\"id\":\"4e8237da.b17dc8\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"{ \\\"Hello\\\": \\\"World\\\" }\",\"x\":290,\"y\":620,\"wires\":[[\"65401623.9abfe8\"]]},{\"id\":\"65401623.9abfe8\",\"type\":\"change\",\"z\":\"3045204d.cfbae\",\"name\":\"Set Headers\",\"rules\":[{\"t\":\"set\",\"p\":\"headers\",\"pt\":\"msg\",\"to\":\"{}\",\"tot\":\"json\"},{\"t\":\"set\",\"p\":\"headers.content-type\",\"pt\":\"msg\",\"to\":\"application/json\",\"tot\":\"str\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":450,\"y\":620,\"wires\":[[\"f7d3e35a.082c2\"]]},{\"id\":\"f7d3e35a.082c2\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":610,\"y\":620,\"wires\":[]}]\n\n[~]$ curl -i http://localhost:1880/hello-json\nHTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: application/json; charset=utf-8\nContent-Length: 20\nETag: W/\"14-jgfjeX8FTECC4q5nXp6n5g\"\nDate: Sat, 26 Nov 2016 23:07:50 GMT\nConnection: keep-alive\n\n{ \"Hello\": \"World\" }\n\nDiscussion\n\nThe HTTP headers returned in the response can be set using the msg.headers property. It should be an object of key/value pairs for each header.\n\nTo return well-formed JSON, the Content-Type header should be set to application/json so the receiver knows to handle it as JSON data.","x":128,"y":1605.8000030517578,"wires":[]},{"id":"3e3c1db3.a756fa","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-json","method":"get","upload":false,"swaggerDoc":"","x":116.69999694824219,"y":1660.2000122070312,"wires":[["fc029fb6.aa27d"]]},{"id":"fc029fb6.aa27d","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{ \"Hello\": \"World\" }","x":286.6999969482422,"y":1660.2000122070312,"wires":[["98d3d6e6.5d1ed"]]},{"id":"98d3d6e6.5d1ed","type":"change","z":"71443717.2ecc38","name":"Set Headers","rules":[{"t":"set","p":"headers","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"headers.content-type","pt":"msg","to":"application/json","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":441.70001220703125,"y":1660.2000122070312,"wires":[["fae68f25.56f618"]]},{"id":"fae68f25.56f618","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":606.6999969482422,"y":1660.2000122070312,"wires":[]},{"id":"50678730.50974","type":"comment","z":"71443717.2ecc38","name":"Serve a local file","info":"\nProblem\n\nYou want to create an HTTP endpoint that responds to GET requests with content from a local file, such an png image.\nSolution\n\nUse the File In node to load the required content and set the Content-Type to the appropriate value for the file type being returned.\nExample\n\n[{\"id\":\"c7e341a0.381cc\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-file\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":110,\"y\":720,\"wires\":[[\"2fb1c354.d04e3c\"]]},{\"id\":\"2fb1c354.d04e3c\",\"type\":\"file in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"filename\":\"/tmp/node-red.png\",\"format\":\"\",\"x\":290,\"y\":720,\"wires\":[[\"c9e28681.361d78\"]]},{\"id\":\"c9e28681.361d78\",\"type\":\"change\",\"z\":\"3045204d.cfbae\",\"name\":\"Set Headers\",\"rules\":[{\"t\":\"set\",\"p\":\"headers\",\"pt\":\"msg\",\"to\":\"{}\",\"tot\":\"json\"},{\"t\":\"set\",\"p\":\"headers.content-type\",\"pt\":\"msg\",\"to\":\"image/png\",\"tot\":\"str\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":470,\"y\":720,\"wires\":[[\"88974243.7768c\"]]},{\"id\":\"88974243.7768c\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":610,\"y\":720,\"wires\":[]}]\n\n[~]$ curl  http://localhost:1880/hello-file > file.png\n\nDiscussion\n\nWhen loading a non-text file such as an image, the File In node must be configured to return a Buffer object.\n\nSo that the receiver knows how to handle the file, the Content-Type header must be set to the appropriate mime type. The example above, which returns a .png file sets the Content-Type header to image/png.","x":115,"y":1708.999984741211,"wires":[]},{"id":"e4c25cf2.54c898","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-file","method":"get","upload":false,"swaggerDoc":"","x":104.69999694824219,"y":1756.2000122070312,"wires":[["2b61d76b.ac76d"]]},{"id":"2b61d76b.ac76d","type":"file in","z":"71443717.2ecc38","name":"","filename":"/tmp/node-red.png","format":"","sendError":true,"x":284.6999969482422,"y":1756.2000122070312,"wires":[["c3a6efde.6b958"]]},{"id":"c3a6efde.6b958","type":"change","z":"71443717.2ecc38","name":"Set Headers","rules":[{"t":"set","p":"headers","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"headers.content-type","pt":"msg","to":"image/png","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":464.6999969482422,"y":1756.2000122070312,"wires":[["51c4cbfb.c7286c"]]},{"id":"51c4cbfb.c7286c","type":"http response","z":"71443717.2ecc38","name":"","x":604.6999969482422,"y":1756.2000122070312,"wires":[]},{"id":"fde24c6d.a5b4","type":"comment","z":"71443717.2ecc38","name":"Post raw data to a flow","info":"\nProblem\n\nYou want to raw text data to a flow.\nSolution\n\nUse the HTTP In node to listen for POST requests that have their Content-Type set to text/plain and access the posted data as msg.payload.\nExample\n\n[{\"id\":\"3e1c5107.c1e3ae\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-raw\",\"method\":\"post\",\"swaggerDoc\":\"\",\"x\":120,\"y\":920,\"wires\":[[\"cf679478.309868\"]]},{\"id\":\"cf679478.309868\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello {{ payload }}!</h1>\\n    </body>\\n</html>\",\"x\":290,\"y\":920,\"wires\":[[\"f3c1a3f0.0c3e6\"]]},{\"id\":\"f3c1a3f0.0c3e6\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":430,\"y\":920,\"wires\":[]}]\n\n[~]$ curl -X POST -d 'Nick' -H \"Content-type: text/plain\" http://localhost:1880/hello-raw\n<html>\n    <head></head>\n    <body>\n        <h1>Hello Nick!</h1>\n    </body>\n</html>\n\nDiscussion\n\nWhen the HTTP In node receives a request with the Content-Type header set to text/plain it makes the body of the available as msg.payload:\n\nvar name = msg.payload;\n","x":135,"y":1803.999984741211,"wires":[]},{"id":"aa78e6ef.23ef","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-raw","method":"post","upload":false,"swaggerDoc":"","x":114.69999694824219,"y":1858.2000122070312,"wires":[["6a35d298.2401c4"]]},{"id":"6a35d298.2401c4","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello {{ payload }}!</h1>\n    </body>\n</html>","x":284.6999969482422,"y":1858.2000122070312,"wires":[["37c9d7da.64b648"]]},{"id":"37c9d7da.64b648","type":"http response","z":"71443717.2ecc38","name":"","x":424.6999969482422,"y":1858.2000122070312,"wires":[]},{"id":"7196899d.cfdef","type":"comment","z":"71443717.2ecc38","name":"Post form data to a flow","info":"Post form data to a flow\nProblem\n\nYou want to post form data to a flow.\nSolution\n\nUse the HTTP In node to listen for POST requests that have their Content-Type set to application/x-www-form-urlencoded and access the form data as properties of msg.payload.\nExample\n\n[{\"id\":\"5b98a8ac.a46758\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-form\",\"method\":\"post\",\"swaggerDoc\":\"\",\"x\":120,\"y\":820,\"wires\":[[\"bba61009.4459f\"]]},{\"id\":\"bba61009.4459f\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello {{ payload.name }}!</h1>\\n    </body>\\n</html>\",\"x\":290,\"y\":820,\"wires\":[[\"6ceb930a.93146c\"]]},{\"id\":\"6ceb930a.93146c\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":430,\"y\":820,\"wires\":[]}]\n\n[~]$ curl -X POST -d \"name=Nick\" http://localhost:1880/hello-form\n<html>\n    <head></head>\n    <body>\n        <h1>Hello Nick!</h1>\n    </body>\n</html>\n\nDiscussion\n\nHTML Forms can be used to send data from the browser back to a server. If configured to POST the data, the browser will encode the data held in the <form> using a content-type of application/x-www-form-urlencoded.\n\nFor example, when a form that looks like this is submitted:\n\n<form action=\"http://localhost:1880/hello-form\" method=\"post\">\n  <input name=\"name\" value=\"Nick\">\n  <button>Say hello</button>\n</form>\n\nit results in the request:\n\nPOST / HTTP/1.1\nHost: localhost:1880\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 9\n\nname=Nick\n\nWhen the HTTP In node receives such a request, it parses the body of the request and makes the form data available under msg.payload:\n\nvar name = msg.payload.name;\n","x":136,"y":1904.999984741211,"wires":[]},{"id":"44e04d92.2f9954","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-form","method":"post","upload":false,"swaggerDoc":"","x":112.70001220703125,"y":1993.2000122070312,"wires":[["62ba44b4.63a914"]]},{"id":"62ba44b4.63a914","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello {{ payload.name }}!</h1>\n    </body>\n</html>","x":282.70001220703125,"y":1993.2000122070312,"wires":[["536f2496.f373b4"]]},{"id":"536f2496.f373b4","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":422.70001220703125,"y":1993.2000122070312,"wires":[]},{"id":"b5c3f10e.25718","type":"template","z":"71443717.2ecc38","name":"Page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<form action=\"http://localhost:1880/hello-form\" method=\"post\">\n  <input name=\"name\" value=\"Nick\">\n  <button>Say hello</button>\n</form>\n","output":"str","x":283.99998474121094,"y":1947.2000122070312,"wires":[["976d7560.b454c"]]},{"id":"976d7560.b454c","type":"http response","z":"71443717.2ecc38","name":"","statusCode":"","headers":{},"x":414.99998474121094,"y":1946.4000091552734,"wires":[]},{"id":"469ecc1a.9c74c4","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-form","method":"get","upload":false,"swaggerDoc":"","x":111,"y":1950.999984741211,"wires":[["b5c3f10e.25718"]]},{"id":"5f284446.080c54","type":"comment","z":"71443717.2ecc38","name":"Post JSON data to a flow","info":"\nProblem\n\nYou want to post JSON data to a flow.\nSolution\n\nUse the HTTP In node to listen for POST requests that have their Content-Type set to application/json and access the parsed JSON as properties of msg.payload.\nExample\n\n[{\"id\":\"5b98a8ac.a46758\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-form\",\"method\":\"post\",\"swaggerDoc\":\"\",\"x\":120,\"y\":820,\"wires\":[[\"bba61009.4459f\"]]},{\"id\":\"bba61009.4459f\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Hello {{ payload.name }}!</h1>\\n    </body>\\n</html>\",\"x\":290,\"y\":820,\"wires\":[[\"6ceb930a.93146c\"]]},{\"id\":\"6ceb930a.93146c\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":430,\"y\":820,\"wires\":[]}]\n\n[~]$ curl -X POST -d '{\"name\":\"Nick\"}' -H \"Content-type: application/json\" http://localhost:1880/hello-form\n<html>\n    <head></head>\n    <body>\n        <h1>Hello Nick!</h1>\n    </body>\n</html>\n\nDiscussion\n\nWhen the HTTP In node receives a request with the Content-Type header set to application/json it parses the body of the request and makes the data available under msg.payload:\n\nvar name = msg.payload.name;\n","x":144,"y":2045.5999755859375,"wires":[]},{"id":"d512e3d.9dd7aa","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-form","method":"post","upload":false,"swaggerDoc":"","x":117.69999694824219,"y":2095.199951171875,"wires":[["8c4d5eb9.37e4e8"]]},{"id":"8c4d5eb9.37e4e8","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Hello {{ payload.name }}!</h1>\n    </body>\n</html>","x":287.6999969482422,"y":2095.199951171875,"wires":[["7c1f0f06.760f8"]]},{"id":"7c1f0f06.760f8","type":"http response","z":"71443717.2ecc38","name":"","x":427.6999969482422,"y":2095.199951171875,"wires":[]},{"id":"4d9fd86b.7298d8","type":"comment","z":"71443717.2ecc38","name":"Work with cookies","info":"Work with cookies\nProblem\n\nYou want to create an HTTP flow that uses cookies.\nSolution\n\nThe messages sent by the HTTP In node include the msg.req.cookies property that lists the cookies set on the current request.\n\nThe HTTP Response node will use the msg.cookies property in order to set or clear cookies.\nExample\n\n[{\"id\":\"c362b989.954ae8\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-cookie\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":130,\"y\":1020,\"wires\":[[\"21ddf71f.d00518\"]]},{\"id\":\"21ddf71f.d00518\",\"type\":\"function\",\"z\":\"3045204d.cfbae\",\"name\":\"Format cookies\",\"func\":\"msg.payload = JSON.stringify(msg.req.cookies,null,4);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":1020,\"wires\":[[\"f3aa98c1.befc18\"]]},{\"id\":\"f3aa98c1.befc18\",\"type\":\"template\",\"z\":\"3045204d.cfbae\",\"name\":\"page\",\"field\":\"payload\",\"fieldType\":\"msg\",\"format\":\"handlebars\",\"syntax\":\"mustache\",\"template\":\"<html>\\n    <head></head>\\n    <body>\\n        <h1>Cookies</h1>\\n        <p></p><a href=\\\"hello-cookie/add\\\">Add a cookie</a> &bull; <a href=\\\"hello-cookie/clear\\\">Clear cookies</a></p>\\n        <pre>{{ payload }}</pre>\\n    </body>\\n</html>\",\"x\":530,\"y\":1020,\"wires\":[[\"f52e2880.180968\"]]},{\"id\":\"f52e2880.180968\",\"type\":\"http response\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"x\":750,\"y\":1020,\"wires\":[]},{\"id\":\"9a2a9a4.0fc0768\",\"type\":\"change\",\"z\":\"3045204d.cfbae\",\"name\":\"Redirect to /hello-cookie\",\"rules\":[{\"t\":\"set\",\"p\":\"statusCode\",\"pt\":\"msg\",\"to\":\"302\",\"tot\":\"num\"},{\"t\":\"set\",\"p\":\"headers\",\"pt\":\"msg\",\"to\":\"{}\",\"tot\":\"json\"},{\"t\":\"set\",\"p\":\"headers.location\",\"pt\":\"msg\",\"to\":\"/hello-cookie\",\"tot\":\"str\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":550,\"y\":1080,\"wires\":[[\"f52e2880.180968\"]]},{\"id\":\"afefb90.53dcf48\",\"type\":\"function\",\"z\":\"3045204d.cfbae\",\"name\":\"Add a cookie\",\"func\":\"msg.cookies = { };\\nmsg.cookies[\\\"demo-\\\"+(Math.floor(Math.random()*1000))] = Date.now();\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":330,\"y\":1060,\"wires\":[[\"9a2a9a4.0fc0768\"]]},{\"id\":\"d5205a2c.db9018\",\"type\":\"function\",\"z\":\"3045204d.cfbae\",\"name\":\"Clear cookies\",\"func\":\"// Find demo cookies and clear them\\nvar cookieNames = Object.keys(msg.req.cookies).filter(function(cookieName) { return /^demo-/.test(cookieName);});\\nmsg.cookies = {};\\n\\ncookieNames.forEach(function(cookieName) {\\n    msg.cookies[cookieName] = null;\\n});\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":340,\"y\":1100,\"wires\":[[\"9a2a9a4.0fc0768\"]]},{\"id\":\"fda60c66.04975\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-cookie/add\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":140,\"y\":1060,\"wires\":[[\"afefb90.53dcf48\"]]},{\"id\":\"35285a76.1f8636\",\"type\":\"http in\",\"z\":\"3045204d.cfbae\",\"name\":\"\",\"url\":\"/hello-cookie/clear\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":140,\"y\":1100,\"wires\":[[\"d5205a2c.db9018\"]]}]\n\nThis example provides three HTTP endpoints:\n\n    /hello-cookie returns a page that lists the cookies currently set\n    /hello-cookie/add adds a new cookie and redirects back to /hello-cookie\n    /hello-cookie/clear clears all cookies created by the example and redirects back to /hello-cookie\n\nDiscussion\n\nThe msg.req.cookies property is an object of key/value pairs containing the cookies set on the current request.\n\nvar mySessionId = msg.req.cookies['sessionId'];\n\nIn order to set a cookie in the response, the msg.cookies property should be set to a similar key/value object.\n\nThe value can be either a string to set the value of the cookie with default options, or it can be an object of options.\n\nThe following example sets two cookies - one called name with a value of Nick, the other called session with a value of 1234 and an expiry set to 15 minutes.\n\nmsg.cookies = {\n    name: 'nick',\n    session: {\n        value: '1234',\n        maxAge: 900000\n    }\n}\n\nThe valid options include:\n\n    domain - (String) domain name for the cookie\n    expires - (Date) expiry date in GMT. If not specified or set to 0, creates a session cookie\n    maxAge - (String) expiry date as relative to the current time in milliseconds\n    path - (String) path for the cookie. Defaults to /\n    value - (String) the value to use for the cookie\n\nTo delete a cookie, set its value to null.","x":127,"y":2142.5999908447266,"wires":[]},{"id":"54996843.971ef","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-cookie","method":"get","upload":false,"swaggerDoc":"","x":116.70001220703125,"y":2187.1998901367188,"wires":[["cec40703.680a88"]]},{"id":"cec40703.680a88","type":"function","z":"71443717.2ecc38","name":"Format cookies","func":"msg.payload = JSON.stringify(msg.req.cookies,null,4);\nreturn msg;","outputs":1,"noerr":0,"x":326.70001220703125,"y":2187.1998901367188,"wires":[["37e20bf1.03d4bc"]]},{"id":"37e20bf1.03d4bc","type":"template","z":"71443717.2ecc38","name":"page","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <head></head>\n    <body>\n        <h1>Cookies</h1>\n        <p></p><a href=\"hello-cookie/add\">Add a cookie</a> &bull; <a href=\"hello-cookie/clear\">Clear cookies</a></p>\n        <pre>{{ payload }}</pre>\n    </body>\n</html>","x":516.7000122070312,"y":2187.1998901367188,"wires":[["b54ceb62.faff58"]]},{"id":"b54ceb62.faff58","type":"http response","z":"71443717.2ecc38","name":"","x":736.7000122070312,"y":2187.1998901367188,"wires":[]},{"id":"84d8697a.7e8db","type":"change","z":"71443717.2ecc38","name":"Redirect to /hello-cookie","rules":[{"t":"set","p":"statusCode","pt":"msg","to":"302","tot":"num"},{"t":"set","p":"headers","pt":"msg","to":"{}","tot":"json"},{"t":"set","p":"headers.location","pt":"msg","to":"/hello-cookie","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":545.6999969482422,"y":2248.199951171875,"wires":[["b54ceb62.faff58","e24cb595.39aff"]]},{"id":"216a6474.49b81c","type":"function","z":"71443717.2ecc38","name":"Add a cookie","func":"msg.cookies = { };\nmsg.cookies[\"demo-\"+(Math.floor(Math.random()*1000))] = Date.now();\nreturn msg;","outputs":1,"noerr":0,"x":325.6999969482422,"y":2228.199951171875,"wires":[["84d8697a.7e8db","e24cb595.39aff"]]},{"id":"e258f504.b53028","type":"function","z":"71443717.2ecc38","name":"Clear cookies","func":"// Find demo cookies and clear them\nvar cookieNames = Object.keys(msg.req.cookies).filter(function(cookieName) { return /^demo-/.test(cookieName);});\nmsg.cookies = {};\n\ncookieNames.forEach(function(cookieName) {\n    msg.cookies[cookieName] = null;\n});\n\nreturn msg;","outputs":1,"noerr":0,"x":335.6999969482422,"y":2268.199951171875,"wires":[["84d8697a.7e8db"]]},{"id":"75b2a83.38277d8","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-cookie/add","method":"get","swaggerDoc":"","x":135.6999969482422,"y":2228.199951171875,"wires":[["216a6474.49b81c"]]},{"id":"a41f68f5.3272b8","type":"http in","z":"71443717.2ecc38","name":"","url":"/hello-cookie/clear","method":"get","swaggerDoc":"","x":135.6999969482422,"y":2268.199951171875,"wires":[["e258f504.b53028"]]},{"id":"e24cb595.39aff","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"true","x":614.5,"y":2101,"wires":[]},{"id":"c11e50d2.2989","type":"comment","z":"71443717.2ecc38","name":"2 HTTP endpoints","info":"","x":130,"y":1020,"wires":[]},{"id":"96082f64.09409","type":"comment","z":"71443717.2ecc38","name":"Simple GET request","info":"Simple GET request\nProblem\n\nYou want to make a simple GET request to a web site and extract useful information.\nSolution\n\nUse the HTTP Request node to make HTTP requests and an HTML node to extract elements from the retrieved html document.\nExample\n\n[{\"id\":\"2fcc167e.b6f18a\",\"type\":\"inject\",\"z\":\"eda2a949.74ea98\",\"name\":\"make request\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":141,\"y\":102,\"wires\":[[\"68587eb0.051ad\"]]},{\"id\":\"68587eb0.051ad\",\"type\":\"http request\",\"z\":\"eda2a949.74ea98\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"https://www.google.com/finance\",\"tls\":\"\",\"x\":305.5,\"y\":102,\"wires\":[[\"292a93f0.7f8fac\"]]},{\"id\":\"9835e7c5.d487a8\",\"type\":\"debug\",\"z\":\"eda2a949.74ea98\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":638,\"y\":102,\"wires\":[]},{\"id\":\"292a93f0.7f8fac\",\"type\":\"html\",\"z\":\"eda2a949.74ea98\",\"name\":\"\",\"tag\":\"td.bld span\",\"ret\":\"html\",\"as\":\"single\",\"x\":472.5,\"y\":102,\"wires\":[[\"9835e7c5.d487a8\"]]}]\n\nTo find content in a web page, the Chrome browserâ€™s â€˜Inspect Elementâ€™ can be a useful tool. Using the browser, right click on a page element to see the tags, ids and classes applied to an element.\n\nIn this example we want to extract the Dow Jones, S&P 500 and Nasdaq indexes from the Google finance page at http://www.google.com/finance shown below. Using the inspector we can see the indexes are in a <span> tag inside a <td> tag with the class bld. The appropriate CSS selector is td.bld span.","x":130,"y":2360,"wires":[]},{"id":"3d65e6d9.cf99ea","type":"inject","z":"71443717.2ecc38","name":"make request","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":130,"y":2420,"wires":[["75b37653.214ac8"]]},{"id":"75b37653.214ac8","type":"http request","z":"71443717.2ecc38","name":"","method":"GET","ret":"txt","url":"https://www.google.com/finance","tls":"","x":290,"y":2420,"wires":[["8212ca43.fa72c"]]},{"id":"de6abe45.caf118","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"payload","x":627,"y":2420,"wires":[]},{"id":"8212ca43.fa72c","type":"html","z":"71443717.2ecc38","name":"","tag":"td.bld span","ret":"html","as":"single","x":461.5,"y":2420,"wires":[["de6abe45.caf118"]]},{"id":"8082643a.55b1d","type":"comment","z":"71443717.2ecc38","name":"Set the URL of a request","info":"Set the URL of a request\nProblem\n\nYou want to set the URL of an HTTP request node dynamically.\nSolution\n\nSet the URL property of the HTTP Request node.\nExample\n\n[{\"id\":\"b36aa30.3a7276\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"\",\"x\":470,\"y\":300,\"wires\":[[\"1ef9987c.956c78\"]]},{\"id\":\"11167f67.5d5031\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"cars on craigslist\",\"topic\":\"\",\"payload\":\"http://vancouver.craigslist.org/search/sss?format=rss&query=cars\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":140,\"y\":300,\"wires\":[[\"70154cd4.de1444\"]]},{\"id\":\"70154cd4.de1444\",\"type\":\"change\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"rules\":[{\"t\":\"set\",\"p\":\"url\",\"pt\":\"msg\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":310,\"y\":300,\"wires\":[[\"b36aa30.3a7276\"]]},{\"id\":\"1ef9987c.956c78\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":630,\"y\":300,\"wires\":[]}]\n\nThe Inject node generates a string URL, and the Change node sets the msg.URL property. In this flow the URL is set to:\n\nhttp://vancouver.craigslist.org/search/sss?format=rss&query=cars\n\nTo return an RSS feed for cars for sale in Vancouver on Craigslist. It returns something like the following XML content in the debug window:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<rdf:RDF\n xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\n xmlns=\"http://purl.org/rss/1.0/\"\n xmlns:enc=\"http://purl.oclc.org/net/rss_2.0/enc#\"\n xmlns:ev=\"http://purl.org/rss/1.0/modules/event/\"\n xmlns:content=\"http://purl.org/rss/1.0/modules/content/\"\n xmlns:dcterms=\"http://purl.org/dc/terms/\"\n xmlns:syn=\"http://purl.org/rss/1.0/modules/syndication/\"\n xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\n xmlns:taxo=\"http://purl.org/rss/1.0/modules/taxonomy/\"\n xmlns:admin=\"http://webns.net/mvcb/\"\n>\n\n<channel rdf:about=\"https://vancouver.craigslist.ca/search/sss?format=rss&#x26;query=cars\">\n<title>craigslist vancouver, BC | for sale search \"cars\"</title>\n<link>https://vancouver.craigslist.ca/search/sss?query=cars</link>\n<description></description>\n<dc:language>en-us</dc:language>\n<dc:rights>copyright 2017 craiglist</dc:rights>\n<dc:publisher>robot@craigslist.org</dc:publisher>\n<dc:creator>robot@craigslist.org</dc:creator>\n<dc:source>https://vancouver...\n\nDiscussion\n\nAn XML node can be added after the HTTP Request to change the XML RSS content returned to a JavaScript object for easy access to the data.","x":153.5,"y":2484.800003051758,"wires":[]},{"id":"de4e3563.028588","type":"http request","z":"71443717.2ecc38","name":"","method":"GET","ret":"txt","url":"","tls":"","x":470,"y":2540,"wires":[["18d4a2b7.254715"]]},{"id":"833406f3.9d167","type":"inject","z":"71443717.2ecc38","name":"cars on craigslist","topic":"","payload":"http://vancouver.craigslist.org/search/sss?format=rss&query=cars","payloadType":"str","repeat":"","crontab":"","once":false,"x":140,"y":2540,"wires":[["f2d41790.29e548"]]},{"id":"f2d41790.29e548","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"set","p":"url","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":2540,"wires":[["de4e3563.028588"]]},{"id":"18d4a2b7.254715","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"false","x":630,"y":2540,"wires":[]},{"id":"ed157f66.d6d7a8","type":"comment","z":"71443717.2ecc38","name":"Set the URL of a request using a template","info":"Set the URL of a request using a template\nProblem\n\nYou want to dynamically set the URL of an HTTP request where only parts of the url change between requests.\nSolution\n\nConfigure the HTTP Request node to generate a URL dynamically using a mustache URL template.\nExample\n\n[{\"id\":\"41747a17.54ffd4\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"https://jsonplaceholder.typicode.com/posts/{{post}}\",\"tls\":\"\",\"x\":550,\"y\":480,\"wires\":[[\"d682318c.36823\"]]},{\"id\":\"d682318c.36823\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":710,\"y\":480,\"wires\":[]},{\"id\":\"90bfea22.dd2b98\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"post id\",\"topic\":\"\",\"payload\":\"2\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":250,\"y\":480,\"wires\":[[\"e67a0cc.596d4f\"]]},{\"id\":\"e67a0cc.596d4f\",\"type\":\"change\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"rules\":[{\"t\":\"set\",\"p\":\"post\",\"pt\":\"msg\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":390,\"y\":480,\"wires\":[[\"41747a17.54ffd4\"]]}]\n\nIn this flow, the Inject node sends an id for a post we would like to request from an API. The Change node changes this to msg.post. The HTTP Request node generates a URL by substituting msg.post of the URL property configured as shown:\n\nhttps://jsonplaceholder.typicode.com/posts/{{post}}\n\nThe JSON output from this API in the debug panel will look as follows:\n\n{\n  \"userId\": 1,\n  \"id\": 2,\n  \"title\": \"qui est esse\",\n  \"body\": \"est rerum tempore vitae\\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\\nqui aperiam non debitis possimus qui neque nisi nulla\"\n}\n\nDiscussion\n\nBy default, mustache will escape any HTML entities in the values it substitutes. To ensure HTML escaping is not used in your URL use {{{triple}}} braces.","x":204.5,"y":2596.800003051758,"wires":[]},{"id":"205a7b79.e29b44","type":"http request","z":"71443717.2ecc38","name":"","method":"GET","ret":"txt","url":"https://jsonplaceholder.typicode.com/posts/{{post}}","tls":"","x":410,"y":2660,"wires":[["245dbb0.e84b1c6"]]},{"id":"245dbb0.e84b1c6","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"payload","x":570,"y":2660,"wires":[]},{"id":"26134e80.d646ca","type":"inject","z":"71443717.2ecc38","name":"post id","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"x":110,"y":2660,"wires":[["fc47a4bf.d62cd8"]]},{"id":"fc47a4bf.d62cd8","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"set","p":"post","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2660,"wires":[["205a7b79.e29b44"]]},{"id":"98fdd229.cb7c48","type":"comment","z":"71443717.2ecc38","name":"Get a parsed JSON Response","info":"\nGet a parsed JSON Response\nProblem\n\nYou want to return the JSON response of an HTTP request as a parsed Javascript object.\nSolution\n\nThe HTTP Request node will return a the body of a JSON response in the msg.payload as a string by default. Change the Return configuration of this node to a parsed JSON object to parse the JSON response in the msg.payload that can be easily accessed by downstream nodes.\nExample\n\n[{\"id\":\"14c60a10.794df6\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"https://jsonplaceholder.typicode.com/posts/{{post}}\",\"tls\":\"\",\"x\":390,\"y\":500,\"wires\":[[\"b4ea8dd4.61a05\"]]},{\"id\":\"b4ea8dd4.61a05\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"payload.title\",\"x\":570,\"y\":500,\"wires\":[]},{\"id\":\"3479192a.04f016\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"post id\",\"topic\":\"\",\"payload\":\"2\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":90,\"y\":500,\"wires\":[[\"e69250cf.368fd\"]]},{\"id\":\"e69250cf.368fd\",\"type\":\"change\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"rules\":[{\"t\":\"set\",\"p\":\"post\",\"pt\":\"msg\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":230,\"y\":500,\"wires\":[[\"14c60a10.794df6\"]]}]\n\nWe have reconfigured the flow from the Set the URL of a Request URL recipe by changing the HTTP Request node configuration. The Debug node has been modified to display only the title property of the parsed JSON response:\n\n\"qui est esse\"\n\nDiscussion\n\nIf your HTTP request returns XML, the XML node can be used to parse Javascript objects from XML documents.\nGot feedback about this page? Let us know!\n","x":160,"y":2880,"wires":[]},{"id":"fc00cb36.2473a","type":"http request","z":"71443717.2ecc38","name":"","method":"GET","ret":"obj","url":"https://jsonplaceholder.typicode.com/posts/{{post}}","tls":"","x":410,"y":2940,"wires":[["3a1c8f6c.f91a68"]]},{"id":"3a1c8f6c.f91a68","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"payload.title","x":590,"y":2940,"wires":[]},{"id":"9b8ba1ab.015a08","type":"inject","z":"71443717.2ecc38","name":"post id","topic":"","payload":"2","payloadType":"str","repeat":"","crontab":"","once":false,"x":110,"y":2940,"wires":[["32cd2d1d.e1e882"]]},{"id":"32cd2d1d.e1e882","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"set","p":"post","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":2940,"wires":[["fc00cb36.2473a"]]},{"id":"6bffb29b.9d055c","type":"comment","z":"71443717.2ecc38","name":"Get binary response","info":"Get binary response\nProblem\n\nYou want to get a binary HTTP response from an HTTP request.\nSolution\n\nThe HTTP Request node will return a the body of a response in the msg.payload as a string by default. Change the Return configuration of this node to a binary buffer to return the response as a binary buffer in the msg.payload.\nExample\n\n[{\"id\":\"871ee927.0d69c8\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":240,\"y\":660,\"wires\":[[\"8ea4e52a.03d678\"]]},{\"id\":\"8ea4e52a.03d678\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"binary http request\",\"method\":\"GET\",\"ret\":\"bin\",\"url\":\"http://localhost:1880/binary\",\"tls\":\"\",\"x\":410,\"y\":660,\"wires\":[[\"70309d0c.4dc504\"]]},{\"id\":\"70309d0c.4dc504\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":590,\"y\":660,\"wires\":[]}]\n\nWe have modified the flow from the Set the URL of a Request URL recipe by changing the HTTP Request node Return configuration to a binary buffer. The Debug node will display the payload as a binary buffer such as:\n\n[ 80, 75, 3, 4, 20, 0, 6, 0, 8, 0 â€¦ ]\n","x":127.5,"y":2991.7999725341797,"wires":[]},{"id":"690b7deb.573d44","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":120,"y":3060,"wires":[["6a8a8a18.b46cd4"]]},{"id":"6a8a8a18.b46cd4","type":"http request","z":"71443717.2ecc38","name":"binary http request","method":"GET","ret":"bin","url":"http://localhost:1880/binary","tls":"","x":310,"y":3060,"wires":[["a6424ec.4e0083"]]},{"id":"a6424ec.4e0083","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"false","x":490,"y":3060,"wires":[]},{"id":"aa6daf21.6584","type":"comment","z":"71443717.2ecc38","name":"Set a request header","info":"Set a request header\nProblem\n\nYou need to send an HTTP request with specific request headers.\nSolution\n\nSet the msg.headers field to the field value pairs of the request headers you would like to include in the message sent to the HTTP request node.\nExample\n\n[{\"id\":\"92272f91.20a43\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":760,\"wires\":[[\"af92df2f.3032e\"]]},{\"id\":\"64da113d.24a75\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"post to FRED\",\"method\":\"POST\",\"ret\":\"txt\",\"url\":\"http://mike.fred.sensetecnic.com/api/test\",\"tls\":\"\",\"x\":520,\"y\":760,\"wires\":[[\"31ab53be.5111dc\"]]},{\"id\":\"af92df2f.3032e\",\"type\":\"function\",\"z\":\"c9a81b70.8abed8\",\"name\":\"set payload and headers\",\"func\":\"msg.payload = \\\"data to post\\\";\\nmsg.headers = {};\\nmsg.headers['X-Auth-User'] = 'mike';\\nmsg.headers['X-Auth-Key'] = 'fred-key';\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":310,\"y\":760,\"wires\":[[\"64da113d.24a75\"]]},{\"id\":\"31ab53be.5111dc\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"false\",\"x\":690,\"y\":760,\"wires\":[]}]\n\nIn this example we set the X-Auth-User and X-Auth-Key request headers to call a private HTTP input node on the FRED Node-RED cloud service.\n\nThe code in the Function node below adds these additional message fields by adding a msg.headers object, and setting the header field/values in this object as shown.\n\nmsg.payload = \"data to post\";\nmsg.headers = {};\nmsg.headers['X-Auth-User'] = 'mike';\nmsg.headers['X-Auth-Key'] = 'fred-key';\nreturn msg;\n","x":134.5,"y":3114.800003051758,"wires":[]},{"id":"40d54cb.fb76d34","type":"inject","z":"71443717.2ecc38","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":100,"y":3180,"wires":[["c04d5cc0.04dc08"]]},{"id":"ead94ec5.fb549","type":"http request","z":"71443717.2ecc38","name":"post to FRED","method":"POST","ret":"txt","url":"http://mike.fred.sensetecnic.com/api/test","tls":"","x":500,"y":3180,"wires":[["f62e4fac.f1cb08"]]},{"id":"c04d5cc0.04dc08","type":"function","z":"71443717.2ecc38","name":"set payload and headers","func":"msg.payload = \"data to post\";\nmsg.headers = {};\nmsg.headers['X-Auth-User'] = 'mike';\nmsg.headers['X-Auth-Key'] = 'fred-key';\n\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":3180,"wires":[["ead94ec5.fb549"]]},{"id":"f62e4fac.f1cb08","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"true","x":650,"y":3180,"wires":[]},{"id":"dca41439.0f297","type":"comment","z":"71443717.2ecc38","name":"Set the query string parameters in a URL","info":"Set the query string parameters in a URL\nProblem\n\nYou want to set the query string parameters of a URL for an HTTP request.\nSolution\n\nUse the HTTP Request nodeâ€™s support for mustache to substitute query parameter strings in URLs directly.\nExample\n\n[{\"id\":\"e95c6faa.ab2e1\",\"type\":\"http request\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"https://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json\",\"tls\":\"\",\"x\":470,\"y\":420,\"wires\":[[\"7cf30700.5bc978\"]]},{\"id\":\"7cf30700.5bc978\",\"type\":\"debug\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":630,\"y\":420,\"wires\":[]},{\"id\":\"637d3c55.eb3084\",\"type\":\"inject\",\"z\":\"c9a81b70.8abed8\",\"name\":\"query parameter\",\"topic\":\"\",\"payload\":\"select astronomy.sunset from weather.forecast where woeid in (select woeid from geo.places(1) where text=\\\"maui, hi\\\")\",\"payloadType\":\"str\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":120,\"y\":420,\"wires\":[[\"b001d489.d8f818\"]]},{\"id\":\"b001d489.d8f818\",\"type\":\"change\",\"z\":\"c9a81b70.8abed8\",\"name\":\"\",\"rules\":[{\"t\":\"set\",\"p\":\"query\",\"pt\":\"msg\",\"to\":\"payload\",\"tot\":\"msg\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":300,\"y\":420,\"wires\":[[\"e95c6faa.ab2e1\"]]}]\n\nThe Inject node generates a query string that is to be sent in the URL. The Change node changes this to msg.query which is substituted in the mustache template in the HTTP Request node URL property configured as shown:\n\nhttps://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json\n\nThe returned JSON content is the sunset in Hawaii:\n\n\"{\"query\":{\"count\":1,\"created\":\"2017-01-22T01:31:07Z\",\"lang\":\"en-US\",\"results\":{\"channel\":{\"astronomy\":{\"sunset\":\"6:9 pm\"}}}}}\"\n\nDiscussion\n\nBy default, mustache will escape any HTML entities in the values it substitutes. To ensure HTML escaping is not used in your URL use {{{triple}}} braces.","x":204.5,"y":2717.800003051758,"wires":[]},{"id":"3a45295e.d87326","type":"http request","z":"71443717.2ecc38","name":"","method":"GET","ret":"txt","url":"https://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json","tls":"","x":490,"y":2780,"wires":[["42bf6767.d77828"]]},{"id":"42bf6767.d77828","type":"debug","z":"71443717.2ecc38","name":"","active":true,"console":"false","complete":"payload","x":650,"y":2780,"wires":[]},{"id":"58a8b59b.51375c","type":"inject","z":"71443717.2ecc38","name":"query parameter","topic":"","payload":"select astronomy.sunset from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"maui, hi\")","payloadType":"str","repeat":"","crontab":"","once":false,"x":140,"y":2780,"wires":[["a27798bb.ba8ea"]]},{"id":"a27798bb.ba8ea","type":"change","z":"71443717.2ecc38","name":"","rules":[{"t":"set","p":"query","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2780,"wires":[["3a45295e.d87326"]]},{"id":"180b77fc.e788e8","type":"comment","z":"71443717.2ecc38","name":"3 HTTP requests","info":"","x":120,"y":2320,"wires":[]},{"id":"c789fc1e.b127f8","type":"comment","z":"773de26a.d88abc","name":"https://medium.com/node-red/node-red-design-patterns-893331422f42","info":"","x":276.5,"y":56,"wires":[]},{"id":"a4c690d8.08c8d","type":"comment","z":"773de26a.d88abc","name":"1. Store & Search pattern","info":"Store & Search is a simple pattern to perform the storage and retrieval of data from a data source. In the example below we are using a CouchDB database to store and then retrieve the data.\n\nStore pattern, is used to store the input payload into a database. In this example, there is a function node that selects the data to be stored.\nSearch pattern, is a pattern for searching the data stored using the Store pattern.","x":155.5,"y":112.80000305175781,"wires":[]},{"id":"eeb9c803.454178","type":"comment","z":"773de26a.d88abc","name":"Store pattern","info":"","x":162.1999969482422,"y":170.1999969482422,"wires":[]},{"id":"b3c59da7.75c478","type":"function","z":"773de26a.d88abc","name":"Select the data to be stored","func":"msg.payload = {DATA: new Date(msg.payload).toString()};\nreturn msg;","outputs":1,"noerr":0,"x":375.9500274658203,"y":216.20001888275146,"wires":[["6e584493.c2f924"]]},{"id":"c611a880.dfd67","type":"inject","z":"773de26a.d88abc","name":"Search term","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":174.70003509521484,"y":358.4500141143799,"wires":[["35181879.647408"]]},{"id":"bde35e9c.64aeb","type":"inject","z":"773de26a.d88abc","name":"Input data","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":176.95003128051758,"y":216.20001411437988,"wires":[["b3c59da7.75c478"]]},{"id":"3815179f.ea2338","type":"debug","z":"773de26a.d88abc","name":"Search results output","active":true,"console":"false","complete":"payload","x":577.7000579833984,"y":358.45001888275146,"wires":[]},{"id":"af660cd0.71b008","type":"comment","z":"773de26a.d88abc","name":"Search pattern","info":"","x":167.2000274658203,"y":310.2000045776367,"wires":[]},{"id":"4748faf9.c23a0c","type":"debug","z":"773de26a.d88abc","name":"Inserted document","active":true,"console":"false","complete":"payload","x":770.1999969482422,"y":216.37848567962646,"wires":[]},{"id":"35181879.647408","type":"cloudant in","z":"773de26a.d88abc","name":"Database","cloudant":"7d1d2d42.82e2d4","database":"test","service":"_ext_","search":"_id_","design":"","index":"","x":357.1999969482422,"y":358.37848567962646,"wires":[["3815179f.ea2338"]]},{"id":"6e584493.c2f924","type":"cloudant in","z":"773de26a.d88abc","name":"Database ","cloudant":"7d1d2d42.82e2d4","database":"test","service":"_ext_","search":"_id_","design":"","index":"","x":583.1999969482422,"y":216.37848567962646,"wires":[["4748faf9.c23a0c"]]},{"id":"7e73c3d6.f9190c","type":"comment","z":"773de26a.d88abc","name":"2. UI & API pattern","info":"These flows work together to demonstrate the UI & API patterns. When navigating to the GET /input endpoint the user is presented with a form. When the form is submitted it calls the GET /output method. During the output flow the request is sent to the GET /api and the results are formatted and returned to the user.\n\nUI pattern, is useful when you need user input to trigger a flow or you need to display data in HTML format to the use. Although, it is possible to create an entire website this way it would become unmanageable.\nAPI pattern, allows you to configure RedConnect as a REST API server. You can create GET, POST, PUT and DELETE request endpoints to trigger a flow. As demonstrated above this can become very powerful when combined with the UI pattern.","x":142.5,"y":426.8000030517578,"wires":[]},{"id":"c77c7c0a.a3d21","type":"comment","z":"773de26a.d88abc","name":"UI pattern","info":"","x":158.1999969482422,"y":480.20001220703125,"wires":[]},{"id":"aba7f5a2.75de38","type":"http in","z":"773de26a.d88abc","name":"","url":"/output","method":"get","swaggerDoc":"","x":173.4777488708496,"y":615.3944044113159,"wires":[["e8ad4956.49aa68"]]},{"id":"e8ad4956.49aa68","type":"function","z":"773de26a.d88abc","name":"Create API request URL","func":"msg.url = msg.req.host + \"/api?q=\" + encodeURI(msg.payload.q);\nreturn msg;","outputs":1,"noerr":0,"x":369.0491943359375,"y":615.4895629882812,"wires":[["ecf17012.715f58"]]},{"id":"ecf17012.715f58","type":"http request","z":"773de26a.d88abc","name":"Call API","method":"GET","ret":"obj","url":"","tls":"","x":565.3349609375,"y":614.8229370117188,"wires":[["bd9665a5.d143c"]]},{"id":"90540820.75989","type":"http response","z":"773de26a.d88abc","name":"HTTP Response","statusCode":"","headers":{},"x":699.5730590820312,"y":712.9180908203125,"wires":[]},{"id":"bd9665a5.d143c","type":"change","z":"773de26a.d88abc","name":"Delete headers","rules":[{"t":"delete","p":"headers"}],"action":"","property":"","from":"","to":"","reg":false,"x":317.7626647949219,"y":712.9657287597656,"wires":[["1bcfeb6e.53ed35"]]},{"id":"1bcfeb6e.53ed35","type":"template","z":"773de26a.d88abc","name":"Format HTML","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"\nResponse from the API: {{payload}}\n","x":500.477783203125,"y":713.06103515625,"wires":[["90540820.75989"]]},{"id":"255772c.c2c4d0e","type":"http response","z":"773de26a.d88abc","name":"HTTP Response","x":560.7160797119141,"y":525.1999206542969,"wires":[]},{"id":"a1a439fb.1a34f","type":"http in","z":"773de26a.d88abc","name":"","url":"/input","method":"get","swaggerDoc":"","x":161.3825798034668,"y":526.1999340057373,"wires":[["6e13bd7.be13dc4"]]},{"id":"6e13bd7.be13dc4","type":"template","z":"773de26a.d88abc","name":"Input form HTML","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"<HTML><BODY><FORM method='GET' action='output'>Search: <INPUT type='text' name='q'><INPUT type='submit'></FORM></BODY></HTML>","x":351.0492706298828,"y":525.866569519043,"wires":[["255772c.c2c4d0e"]]},{"id":"63eca3ea.b5cd74","type":"http in","z":"773de26a.d88abc","name":"","url":"/api","method":"get","swaggerDoc":"","x":156.83873748779297,"y":848.7278165817261,"wires":[["ee550d6.c17b97"]]},{"id":"7b3662be.4a14c4","type":"http response","z":"773de26a.d88abc","name":"HTTP Response","statusCode":"","headers":{},"x":596.7277755737305,"y":848.4420585632324,"wires":[]},{"id":"d619998.b012de8","type":"comment","z":"773de26a.d88abc","name":"API pattern","info":"","x":164.20003128051758,"y":801.6166987419128,"wires":[]},{"id":"31fc0e1e.27b10a","type":"comment","z":"773de26a.d88abc","name":"â†“ A query is sent to the API pattern below","info":"","x":618.4500389099121,"y":567.3667297363281,"wires":[]},{"id":"fae1b2fe.76acd8","type":"comment","z":"773de26a.d88abc","name":"â†“ Returns a HTML form","info":"","x":367.2000274658203,"y":480.0333709716797,"wires":[]},{"id":"bee6e0f3.b5248","type":"comment","z":"773de26a.d88abc","name":"â†“ Form submission above triggers this flow","info":"","x":261.4500312805176,"y":567.7000427246094,"wires":[]},{"id":"424b2cfa.00d0ac","type":"comment","z":"773de26a.d88abc","name":"â†‘ Logic to get data for query","info":"","x":387.6723175048828,"y":890.7198486328125,"wires":[]},{"id":"ee550d6.c17b97","type":"template","z":"773de26a.d88abc","name":"Format Response","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"You searched for: {{payload.q}}","x":358.51341247558594,"y":848.664306640625,"wires":[["7b3662be.4a14c4"]]},{"id":"3b73ea3e.c7ffb6","type":"comment","z":"773de26a.d88abc","name":"3. Timeout pattern","info":"3. Timeout pattern\n\nThis flow extends the output flow shown above to add a timeout feature. After 5 seconds if the /api endpoint has not responded then a timeout message is sent in the response.\n\nTimeout pattern, often when calling APIâ€™s or database in a remote location the data does not respond instantly. A request to a flow could potentially wait indefinitely whilst gathering the data it needs. The timeout pattern can be used to add a number of seconds before failing gracefully.","x":138.5,"y":980.8000030517578,"wires":[]},{"id":"52436010.e75cc","type":"comment","z":"773de26a.d88abc","name":"4. While pattern","info":"4. While pattern\n\nThe while pattern is used as a drop in replacement for the traditional while pattern found in computer science.\n\nWhile pattern, allows you to repeat a node â€˜xâ€™ number of times. Once the loop is complete the finished loop flow is started. This is a useful pattern when you need to repeat a loop a â€œknownâ€ number of times. We will show later on how this flow can be combined with the Separator pattern to loop a dynamic number of times.","x":142.5,"y":1457.7999267578125,"wires":[]},{"id":"39544c9c.6ff5b4","type":"comment","z":"773de26a.d88abc","name":"5. Sequence pattern","info":"5. Sequence pattern\n\nThe flow below shows how you can hold on to a value and use it later in the flow. In this case we are adding two numbers together. The first number is defined and added to the tmp property. We later add another number and combine the two numbers, displaying the result.\n\nSequence pattern, demonstrates how you can add new properties to the msg object that is passed along the flow. By design all nodes can overwrite the payload property. By assigning new properties to the msg object you can use these values in the latter stages of the flow. A good practical example of this is that the http request node adds a property called res to the msg object which is used by the http response node at the end of the flow. One thing to be cautious of is that any node can overwrite your custom property. Therefore itâ€™s important to make sure the key name you use is unique enough so that you donâ€™t lose data.","x":156.49998474121094,"y":1740.7999267578125,"wires":[]},{"id":"af7f430e.9ce678","type":"comment","z":"773de26a.d88abc","name":"6. Aggregator pattern","info":"6. Aggregator pattern\n\nThis flow allows you to run two or more parallel operations and then combine the results. Here we take two functions that pass a single number each in the payload. Once both operations are complete the numbers are added together and the result is returned.\n\nAggregator pattern is useful for combining asynchronous operations. A practical example of this would be when you need to combine the responses from two or more API requests into a single response. This pattern has an advantage over the sequence pattern as both requests happen simultaneously, reducing delay.\n","x":167.50006103515625,"y":2098.7999267578125,"wires":[]},{"id":"8c521e26.0584f","type":"comment","z":"773de26a.d88abc","name":"7. Separator pattern","info":"7. Separator pattern\n\nThis pattern is used when you need to send two or more outputs from a node. In this flow the output of the function node returns an array or msg objects that are then passed to the output.\n\nSeparator pattern is the inverse of the aggregator pattern instead of combining two or more outputs, the separator pattern splits the output into multiple messages. It sometimes can be useful to combine the aggregator pattern and separator pattern when you need to send dynamic data to the parallel functions of the aggregator pattern. This is commonly referred to as MapReduce and itâ€™s this pattern we will look at next.\n","x":152.5,"y":2428.7998046875,"wires":[]},{"id":"608af44c.3abc24","type":"comment","z":"773de26a.d88abc","name":"8. MapReduce pattern","info":"8. MapReduce pattern\n\nThis pattern is created by combining the Aggregator and Separator patterns. In this example we are counting the words in the sentence. We require 2 outputs those words that start from a-m and those from n-z. We start by passing in a sentence into the Map node, where the words for that sentence are counted and added to an array. The Reduce node then combines all 3 arrays, creating a new array of the combined totals from all 3 sentences.\n\nHere the Map node is performing the Separator pattern and Reduce is performing the Aggregator pattern. Although the MapReduce pattern is generally quite complex in traditional programming, visually it is much easier to understand and implement. MapReduce is normally used in the real world for data analysis when you need to produce analytics for a stream of input data.","x":154.5001220703125,"y":2668.7998046875,"wires":[]},{"id":"c3885c68.8d7b48","type":"comment","z":"773de26a.d88abc","name":"Timeout pattern","info":"","x":162.1999969482422,"y":1046.199951171875,"wires":[]},{"id":"3712e5e8.c2cf2a","type":"comment","z":"773de26a.d88abc","name":"When the search completes within 5 seconds, it displays the search results on the browser","info":"","x":390.6999969482422,"y":1094.199935913086,"wires":[]},{"id":"ad04d95e.2eb848","type":"comment","z":"773de26a.d88abc","name":" â†‘ If the search takes longer than 5 seconds, it displays a \"timed out\" message on the browser","info":"","x":502.1999969482422,"y":1337.0333251953125,"wires":[]},{"id":"83fd7d70.1a8db","type":"delay","z":"773de26a.d88abc","name":"Wait 5 Seconds","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":266.5214080810547,"y":1297.041259765625,"wires":[["26f954b5.be2eac"]]},{"id":"26f954b5.be2eac","type":"template","z":"773de26a.d88abc","name":"Time-out display HTML","field":"payload","format":"html","template":"\nIt Timed Out.\n","x":472.5214080810547,"y":1297.041259765625,"wires":[["624f68db.10dc6"]]},{"id":"2ae0620f.fddb86","type":"http in","z":"773de26a.d88abc","name":"","url":"/output","method":"get","swaggerDoc":"","x":149.1999969482422,"y":1139.199951171875,"wires":[["5f2e8b20.19d4b4","83fd7d70.1a8db"]]},{"id":"5f2e8b20.19d4b4","type":"function","z":"773de26a.d88abc","name":"Create API request URL","func":"msg.url = msg.req.host + \"/unknown?q=\" + encodeURI(msg.payload.q);\nreturn msg;","outputs":1,"noerr":0,"x":333.77141189575195,"y":1139.2951250076294,"wires":[["2ea6f402.4d42b4"]]},{"id":"2ea6f402.4d42b4","type":"http request","z":"773de26a.d88abc","name":"Call API","method":"GET","ret":"obj","url":"","x":502.0572204589844,"y":1138.628454208374,"wires":[["35b34d3c.2544aa"]]},{"id":"624f68db.10dc6","type":"http response","z":"773de26a.d88abc","name":"HTTP Response","x":672.2953033447266,"y":1252.7236022949219,"wires":[]},{"id":"35b34d3c.2544aa","type":"change","z":"773de26a.d88abc","name":"Delete headers","rules":[{"t":"delete","p":"headers"}],"action":"","property":"","from":"","to":"","reg":false,"x":339.4849090576172,"y":1252.771240234375,"wires":[["83526fdc.a3b348"]]},{"id":"83526fdc.a3b348","type":"template","z":"773de26a.d88abc","name":"Format HTML","field":"payload","format":"html","template":"\nResponse from the API: {{payload}}\n","x":505.20000076293945,"y":1252.8665285110474,"wires":[["624f68db.10dc6"]]},{"id":"adafbe8d.64d94","type":"template","z":"773de26a.d88abc","name":"i=0","field":"i","format":"handlebars","template":"0","x":295.20001220703125,"y":1611.199951171875,"wires":[["1c526200.63c18e"]]},{"id":"1c526200.63c18e","type":"switch","z":"773de26a.d88abc","name":"i<4","property":"i","rules":[{"t":"lt","v":"4"},{"t":"else"}],"checkall":"true","outputs":2,"x":433.20001220703125,"y":1611.199951171875,"wires":[["5352a4e1.4b0a2c"],["1d0097dc.a9c93"]]},{"id":"651430f7.9ff7d8","type":"function","z":"773de26a.d88abc","name":"i++","func":"msg.i++;\n\nreturn msg;","outputs":1,"noerr":0,"x":539.2000122070312,"y":1516.199951171875,"wires":[["1c526200.63c18e"]]},{"id":"46a694b2.53415c","type":"debug","z":"773de26a.d88abc","name":"End","active":true,"console":"false","complete":"payload","x":807.2000122070312,"y":1661.1999597549438,"wires":[]},{"id":"75d97274.67191c","type":"debug","z":"773de26a.d88abc","name":"Output \"i\"","active":true,"console":"false","complete":"payload","x":813.5999755859375,"y":1611.2665948867798,"wires":[]},{"id":"4c39dc6.d478d24","type":"inject","z":"773de26a.d88abc","name":"Start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":177.0958251953125,"y":1611.0888671875,"wires":[["adafbe8d.64d94"]]},{"id":"653312b8.53851c","type":"comment","z":"773de26a.d88abc","name":"while pattern","info":"","x":168.36666870117188,"y":1515.7555627822876,"wires":[]},{"id":"b96af394.0b12e","type":"comment","z":"773de26a.d88abc","name":"â†“ Outputs 4 times","info":"","x":837.199951171875,"y":1570.3665704727173,"wires":[]},{"id":"7e38afff.080578","type":"comment","z":"773de26a.d88abc","name":"loop while i < 4 is true â†‘","info":"","x":386.8666687011719,"y":1651.8665857315063,"wires":[]},{"id":"fcff76b7.f1af88","type":"comment","z":"773de26a.d88abc","name":"Start the incremented value at 0 â†“","info":"","x":232.36666870117188,"y":1569.3666467666626,"wires":[]},{"id":"7f175b6a.d128fc","type":"comment","z":"773de26a.d88abc","name":"â† increments the value \"i\"","info":"","x":736.7000122070312,"y":1515.5333185195923,"wires":[]},{"id":"1d0097dc.a9c93","type":"template","z":"773de26a.d88abc","name":"Loop Finished","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"Loop Finished","x":588.4380874633789,"y":1662.0689687728882,"wires":[["46a694b2.53415c"]]},{"id":"5352a4e1.4b0a2c","type":"template","z":"773de26a.d88abc","name":"Output current \"i\" value","field":"payload","format":"handlebars","template":"{{i}}","x":616.1999816894531,"y":1611.1999444961548,"wires":[["75d97274.67191c","651430f7.9ff7d8"]]},{"id":"334ecd15.b0f7ca","type":"comment","z":"773de26a.d88abc","name":"Sequence pattern","info":"","x":214.1999969482422,"y":1805.199951171875,"wires":[]},{"id":"4d8a6f47.ece58","type":"function","z":"773de26a.d88abc","name":"payload=451","func":"msg.payload = 451;\n\nreturn msg;","outputs":1,"noerr":0,"x":453.86666107177734,"y":1849.5333251953125,"wires":[["6c1e04f5.b5f6dc"]]},{"id":"add9ed43.8dc4e","type":"function","z":"773de26a.d88abc","name":"msg.tmp + msg.payload","func":"msg.payload = msg.tmp + msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":648.8666610717773,"y":1932.5333251953125,"wires":[["d5656bc.3a5bb98"]]},{"id":"1bc73d5c.7684a3","type":"function","z":"773de26a.d88abc","name":"payload=326","func":"msg.payload = 326;\n\nreturn msg;","outputs":1,"noerr":0,"x":453.86666107177734,"y":1932.5333251953125,"wires":[["add9ed43.8dc4e"]]},{"id":"d5656bc.3a5bb98","type":"debug","z":"773de26a.d88abc","name":"Result = 777","active":true,"console":"false","complete":"payload","x":833.8666610717773,"y":1932.5333251953125,"wires":[]},{"id":"5d56a94a.f84188","type":"inject","z":"773de26a.d88abc","name":"Calculate the sum of two values","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":238.8666534423828,"y":1849.5333232879639,"wires":[["4d8a6f47.ece58"]]},{"id":"6c1e04f5.b5f6dc","type":"function","z":"773de26a.d88abc","name":"tmp=payload","func":"msg.tmp = msg.payload;\n\nreturn msg;","outputs":1,"noerr":0,"x":612.8666610717773,"y":1849.5333251953125,"wires":[["1bc73d5c.7684a3"]]},{"id":"b2335d64.085a68","type":"comment","z":"773de26a.d88abc","name":"â†“ Save the payload in tmp","info":"","x":651.3666229248047,"y":1805.0333232879639,"wires":[]},{"id":"d400a21c.bbd6e","type":"comment","z":"773de26a.d88abc","name":"â†“ Set 1st value","info":"","x":459.3666534423828,"y":1804.8666362762451,"wires":[]},{"id":"d6ebe58b.087748","type":"comment","z":"773de26a.d88abc","name":"â†‘ Set 2nd value","info":"","x":452.8666458129883,"y":1976.1998949050903,"wires":[]},{"id":"ffc8150.9f612e8","type":"comment","z":"773de26a.d88abc","name":"â†‘ Perform the calculation","info":"","x":652.3666229248047,"y":1975.2000102996826,"wires":[]},{"id":"9304f968.932d58","type":"comment","z":"773de26a.d88abc","name":"Aggregator pattern","info":"","x":223.26666259765625,"y":2167.86669921875,"wires":[]},{"id":"ad335c0b.a1c43","type":"function","z":"773de26a.d88abc","name":"payload=451","func":"msg.payload = 451;\n\nreturn msg;","outputs":1,"noerr":0,"x":507.0999526977539,"y":2251.3668117523193,"wires":[["dec13cbc.3e81d8"]]},{"id":"dec13cbc.3e81d8","type":"function","z":"773de26a.d88abc","name":"Calculate Sum","func":"// Reduce the number of inputs\ncontext.global.n--;\n\n// Store the data in msg.payload for all operations as they complete\ncontext.global.data[context.global.n] = msg.payload;\n\n// When all operations are complete calculate the sum and return\nif (context.global.n === 0)\n{   // Calculate the total value\n    var sum = 0;\n    for (var i = 0; i < context.global.data.length; i++)\n    {\n        sum += context.global.data[i];\n    }\n    msg.payload = sum;\n\n    return msg;\n}","outputs":1,"noerr":0,"x":702.1000061035156,"y":2274.366834640503,"wires":[["ad644c53.c3ba08"]]},{"id":"2a32fd3a.c498b2","type":"function","z":"773de26a.d88abc","name":"payload=326","func":"msg.payload = 326;\n\nreturn msg;","outputs":1,"noerr":0,"x":506.0999755859375,"y":2299.3668241500854,"wires":[["dec13cbc.3e81d8"]]},{"id":"ad644c53.c3ba08","type":"debug","z":"773de26a.d88abc","name":"Returns 777","active":true,"console":"false","complete":"payload","x":884.099983215332,"y":2274.366822242737,"wires":[]},{"id":"25067aaa.efc37e","type":"function","z":"773de26a.d88abc","name":"Combine 2 Functions","func":"context.global.n = 2;\ncontext.global.data = new Array(2);\n\nreturn msg;","outputs":1,"noerr":0,"x":303.0999755859375,"y":2276.3668212890625,"wires":[["ad335c0b.a1c43","2a32fd3a.c498b2"]]},{"id":"921c2a52.e6e158","type":"comment","z":"773de26a.d88abc","name":"â†“ 1st value","info":"","x":505.8464660644531,"y":2212.940887451172,"wires":[]},{"id":"c12f3e40.b0cce","type":"inject","z":"773de26a.d88abc","name":"Calculate the sum of 2 numbers","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":263.15602111816406,"y":2212.0599212646484,"wires":[["25067aaa.efc37e"]]},{"id":"7acf603.844832","type":"comment","z":"773de26a.d88abc","name":"â†‘ 2nd value","info":"","x":504.67981719970703,"y":2339.9407997131348,"wires":[]},{"id":"256909ad.f9b756","type":"comment","z":"773de26a.d88abc","name":"Define how many parallel operations â†‘","info":"","x":252.60836791992188,"y":2319.48828125,"wires":[]},{"id":"1e60e879.2abdb","type":"comment","z":"773de26a.d88abc","name":"â†‘ Once all parallel operations complete, calculate sum","info":"","x":789.1798706054688,"y":2316.774169921875,"wires":[]},{"id":"dbcae818.2587c","type":"inject","z":"773de26a.d88abc","name":"Start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":157.26666259765625,"y":2537.466552734375,"wires":[["7ba785a7.6cddf4"]]},{"id":"7ba785a7.6cddf4","type":"function","z":"773de26a.d88abc","name":"1st output 451, 2nd output 326","func":"msg.payload = 451;\nvar msg2 = {};\nmsg2.payload = 326;\n\nreturn [msg, msg2];","outputs":"2","noerr":0,"x":351.26666259765625,"y":2537.466552734375,"wires":[["8f3d94cf.ab3dc"],["5fb8ef88.e08a28"]]},{"id":"8f3d94cf.ab3dc","type":"debug","z":"773de26a.d88abc","name":"Returns 451","active":true,"console":"false","complete":"payload","x":564.2666625976562,"y":2510.466552734375,"wires":[]},{"id":"5fb8ef88.e08a28","type":"debug","z":"773de26a.d88abc","name":"Returns 326","active":true,"console":"false","complete":"payload","x":562.2666625976562,"y":2563.466552734375,"wires":[]},{"id":"2e9b141d.73e67c","type":"comment","z":"773de26a.d88abc","name":"Separator pattern","info":"","x":159.60000610351562,"y":2492.9664669036865,"wires":[]},{"id":"cff6309.986d9d","type":"comment","z":"773de26a.d88abc","name":"â†‘ 1 input and 2 outputs","info":"","x":326.1798095703125,"y":2581.892364501953,"wires":[]},{"id":"ec0251b3.103ea","type":"inject","z":"773de26a.d88abc","name":"WordCount Start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":140,"y":2760,"wires":[["6e82cc21.706a84"]]},{"id":"5207ba83.b8a35c","type":"function","z":"773de26a.d88abc","name":"Map","func":"var input = msg.payload.toLowerCase()\n                       .replace( /\\.$/, \"\")\n                       .split(/ |, /);\n// Map\nvar key_value = [];\nfor (var i=0; i<input.length; i++)\n{\n    var key = input[i];\n    if (key in key_value)\n    {\n        key_value[key]++;\n    } else {\n        key_value[key] = 1;\n    }\n}\n\n// Shuffle\nvar key1_value = [];\nvar key2_value = [];\nfor (var key in key_value)\n{\n    if ('a'<=key[0] && key[0]<='m')\n    {\n        key1_value.push([key, key_value[key]]);\n    } else {\n        key2_value.push([key, key_value[key]]);\n    }\n}\n\nmsg.payload = key1_value;\nvar msg2 = {};\nmsg2.payload = key2_value;\nreturn [msg, msg2];","outputs":"2","noerr":0,"x":509.26666259765625,"y":2801.4665088653564,"wires":[["5fa6aacb.cddf84"],["8bf87bf6.290cf8"]]},{"id":"5fa6aacb.cddf84","type":"function","z":"773de26a.d88abc","name":"Reduce","func":"context.global.n1--;\n\ncontext.global.data1[context.global.n1] = msg.payload;\n\nif (context.global.n1 === 0)\n{  \n    var tmp = [];\n    for (var i=0; i<context.global.data1.length; i++)\n    {\n        var input = context.global.data1[i];\n        for (var j=0; j<input.length; j++)\n        {\n            var key = input[j][0];\n            var value = input[j][1];\n            if (key in tmp)\n            {\n                tmp[key] += value;\n            } else {\n                tmp[key] = value;\n            }\n        }\n    }\n    \n    var output = [];\n    for (var key in tmp)\n    {\n        output.push([key, tmp[key]]);\n    }\n    msg.payload = output;\n\n    return msg;\n}","outputs":1,"noerr":0,"x":717.2666625976562,"y":2816.4665088653564,"wires":[["cc0181f0.f8079"]]},{"id":"cc0181f0.f8079","type":"debug","z":"773de26a.d88abc","name":"Output","active":true,"console":"false","complete":"payload","x":857.2666625976562,"y":2816.4665088653564,"wires":[]},{"id":"6e82cc21.706a84","type":"function","z":"773de26a.d88abc","name":"Map=3","func":"var map = 3;\n\ncontext.global.n1 = map;\ncontext.global.data1 = new Array(map);\n\ncontext.global.n2 = map;\ncontext.global.data2 = new Array(map);\n\nreturn msg;","outputs":1,"noerr":0,"x":196.26666259765625,"y":2847.4665088653564,"wires":[["aced299b.1121f","7873b1d1.5797a8","84d5e96b.2f169"]]},{"id":"aced299b.1121f","type":"template","z":"773de26a.d88abc","name":"This is a pen.","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"This is a pen.","x":365.26666259765625,"y":2801.4665088653564,"wires":[["5207ba83.b8a35c"]]},{"id":"8bf87bf6.290cf8","type":"function","z":"773de26a.d88abc","name":"Reduce","func":"context.global.n2--;\n\ncontext.global.data2[context.global.n2] = msg.payload;\n\nif (context.global.n2 === 0)\n{   \n    var tmp = [];\n    for (var i=0; i<context.global.data2.length; i++)\n    {\n        var input = context.global.data2[i];\n        for (var j=0; j<input.length; j++)\n        {\n            var key = input[j][0];\n            var value = input[j][1];\n            if (key in tmp)\n            {\n                tmp[key] += value;\n            } else {\n                tmp[key] = value;\n            }\n        }\n    }\n    \n    var output = [];\n    for (var key in tmp)\n    {\n        output.push([key, tmp[key]]);\n    }\n    msg.payload = output;\n\n    return msg;\n}","outputs":1,"noerr":0,"x":719.2666625976562,"y":2868.4665088653564,"wires":[["ac4dfff8.424498"]]},{"id":"ac4dfff8.424498","type":"debug","z":"773de26a.d88abc","name":"Output","active":true,"console":"false","complete":"payload","x":858.2666625976562,"y":2868.4665088653564,"wires":[]},{"id":"1d705d2f.713afb","type":"function","z":"773de26a.d88abc","name":"Map","func":"var input = msg.payload.toLowerCase()\n                       .replace( /\\.$/, \"\")\n                       .split(/ |, /);\n// Map\nvar key_value = [];\nfor (var i=0; i<input.length; i++)\n{\n    var key = input[i];\n    if (key in key_value)\n    {\n        key_value[key]++;\n    } else {\n        key_value[key] = 1;\n    }\n}\n\n// Shuffle\nvar key1_value = [];\nvar key2_value = [];\nfor (var key in key_value)\n{\n    if ('a'<=key[0] && key[0]<='m')\n    {\n        key1_value.push([key, key_value[key]]);\n    } else {\n        key2_value.push([key, key_value[key]]);\n    }\n}\n\nmsg.payload = key1_value;\nvar msg2 = {};\nmsg2.payload = key2_value;\nreturn [msg, msg2];","outputs":"2","noerr":0,"x":510.26666259765625,"y":2847.4665088653564,"wires":[["5fa6aacb.cddf84"],["8bf87bf6.290cf8"]]},{"id":"6d21c8ed.747a3","type":"function","z":"773de26a.d88abc","name":"Map","func":"var input = msg.payload.toLowerCase()\n                       .replace( /\\.$/, \"\")\n                       .split(/ |, /);\n// Map\nvar key_value = [];\nfor (var i=0; i<input.length; i++)\n{\n    var key = input[i];\n    if (key in key_value)\n    {\n        key_value[key]++;\n    } else {\n        key_value[key] = 1;\n    }\n}\n\n// Shuffle\nvar key1_value = [];\nvar key2_value = [];\nfor (var key in key_value)\n{\n    if ('a'<=key[0] && key[0]<='m')\n    {\n        key1_value.push([key, key_value[key]]);\n    } else {\n        key2_value.push([key, key_value[key]]);\n    }\n}\n\nmsg.payload = key1_value;\nvar msg2 = {};\nmsg2.payload = key2_value;\nreturn [msg, msg2];","outputs":"2","noerr":0,"x":511.26666259765625,"y":2893.4665088653564,"wires":[["5fa6aacb.cddf84"],["8bf87bf6.290cf8"]]},{"id":"7873b1d1.5797a8","type":"template","z":"773de26a.d88abc","name":"Give me a pen.","field":"payload","fieldType":"msg","format":"html","syntax":"mustache","template":"Give me a pen.","x":360.26666259765625,"y":2847.4665088653564,"wires":[["1d705d2f.713afb"]]},{"id":"84d5e96b.2f169","type":"template","z":"773de26a.d88abc","name":"This pen is small.","field":"payload","format":"html","template":"This pen is small.","x":353.26666259765625,"y":2893.4665088653564,"wires":[["6d21c8ed.747a3"]]},{"id":"25ee3e57.7bb9c2","type":"comment","z":"773de26a.d88abc","name":"MapReduce pattern","info":"","x":196.26666259765625,"y":2722.4665088653564,"wires":[]},{"id":"f40fb4f6.720d9","type":"comment","z":"773de26a.d88abc","name":"Set the map count â†‘","info":"","x":157.1798553466797,"y":2893.8924102783203,"wires":[]},{"id":"ec02ad21.872a4","type":"comment","z":"773de26a.d88abc","name":"â†“ input data to be processed","info":"","x":433.34649658203125,"y":2759.8923292160034,"wires":[]},{"id":"73fb8562.4a1ffc","type":"comment","z":"773de26a.d88abc","name":"â†‘ seperates the words based on the first letter, a-m is sent to the top function, n-z is sent to the lower","info":"","x":766.6798095703125,"y":2933.318193435669,"wires":[]},{"id":"18ac27a4.73cd68","type":"comment","z":"773de26a.d88abc","name":"â†“ reduce the arrays and count the total value","info":"","x":827.8464965820312,"y":2774.984941482544,"wires":[]},{"id":"168f9716.aa85a1","type":"comment","z":"773de26a.d88abc","name":"After all inputs have returned,","info":"","x":778.7666625976562,"y":2736.383180618286,"wires":[]},{"id":"4e85160b.3761e","type":"inject","z":"8d282198.12b318","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":120,"wires":[["7d17c992.6c55"]]},{"id":"c393a344.a19e9","type":"debug","z":"8d282198.12b318","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":850,"y":80,"wires":[]},{"id":"7d17c992.6c55","type":"process-env","z":"8d282198.12b318","name":"","into":"payload","x":270,"y":180,"wires":[["af775089.0be3a8"]]},{"id":"163b011e.bf1f6f","type":"function","z":"8d282198.12b318","name":"","func":"//for (const [key, value] of Object.entries(msg.payload)) {\n//console.log( `${key} ${value}`); // \"a 5\", \"b 7\", \"c 9\"\n\n\n\n//const map = new Map(Object.entries(msg.payload));\nmsg.payload = Object.entries(msg.payload)\n\n\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":400,"wires":[["dddbc21b.453ca"]]},{"id":"5f15430c.6323b4","type":"template","z":"8d282198.12b318","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{#payload}}\n<p>{{.}}</p>\n{{/payload}}","output":"str","x":600,"y":40,"wires":[["c393a344.a19e9"]]},{"id":"b9a6e302.b01378","type":"template","z":"8d282198.12b318","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{#payload}}\n<p>{{0}}, {{1}}</p>\n{{/payload}}","output":"str","x":600,"y":80,"wires":[["c393a344.a19e9"]]},{"id":"dddbc21b.453ca","type":"template","z":"8d282198.12b318","name":"","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"[{{#payload}}{\"Key\":\"{{0}}\",\"Value\":\"{{1}}\"},{{/payload}}]","output":"str","x":440,"y":400,"wires":[["a4e5ff16.6dbd8"]]},{"id":"a4e5ff16.6dbd8","type":"function","z":"8d282198.12b318","name":"","func":"msg.payload = msg.payload.replace(\",]\", \"]\");\n//msg.payload = msg.payload.replace(\"[\", \"{\");\n//msg.payload = JSON.parse(msg.payload)\nmsg.payload = JSON.stringify(msg.payload)\nmsg.payload = JSON.parse(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":420,"wires":[[]]},{"id":"af775089.0be3a8","type":"function","z":"8d282198.12b318","name":"","func":"//msg.payload = JSON.parse(msg.payload)\nvar data = Object.entries(msg.payload)\nvar newdata = []\nfor (var i = 0; i < data.length; i++) {\n//        data = data.push(\"'Key':\"+msg.payload[i][0]+\",'Value':\"+msg.payload[i][1]);\nnewdata[i] = '{\"Key\":\"'+data[i][0]+'\",\"Value\":\"'+data[i][1].substring(0, 32)+'\"}';\n\n        }\nmsg.payload =  newdata\nmsg.payload = JSON.stringify(newdata)\nreturn msg;","outputs":1,"noerr":0,"x":450,"y":240,"wires":[["c393a344.a19e9"]]},{"id":"295e10fe.476dc","type":"template","z":"8d282198.12b318","name":"Web Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <title>Licence Plate</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css\" />\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css\" />\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css\" />\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js\"></script>\n\n    <script type=\"text/javascript\">\n        $(function () {\n            var db = {{#payload}}{{{.}}}{{/payload}};\n                $(\"#jsgrid\").jsGrid({\n                    width: \"100%\",\n                    sorting: true,\n                    paging: true,\n                    filtering: false,\n                    autoload: true,\n                    data: db,\n                    controller: db,\n                    fields: [\n                        { title:\"Key\", name: \"Key\", type: \"text\", width: 100 },\n                        { title:\"Value\", name: \"Value\", type: \"text\", width: 100 }\n                     ]\n               \n\n                });\n            });\n    \n  </script>\n</head>\n<body class=\"container\">\n    <section class=\"row\">\n        \n        <div class=\"col-md-6\"></div>\n        <div class=\"col-md-6\" id=\"jsgrid\">\n        </div>\n    </section>\n</body>\n</html>\n\n","x":660,"y":520,"wires":[[]]},{"id":"408bfe40.cb682","type":"http in","z":"8d282198.12b318","name":"","url":"/ok","method":"get","upload":false,"swaggerDoc":"","x":140,"y":760,"wires":[["9bf5d710.fac738"]]},{"id":"9ba9e8c8.c232d","type":"function","z":"8d282198.12b318","name":"","func":"\nmsg.payload = '[{\"Key\":\"ALLUSERSPROFILE\",\"Value\":\"C:\\ProgramData\"},{\"Key\":\"APPDATA\",\"Value\":\"C:\\Users\\MACIEJMARTUSEWICZ\\AppData\\Roaming\"},{\"Key\":\"asl.log\",\"Value\":\"Destination&#x3D;file\"}]';\n\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":520,"wires":[["295e10fe.476dc"]]},{"id":"faeb0bca.3e2fa8","type":"json","z":"8d282198.12b318","name":"","property":"payload","action":"","pretty":false,"x":890,"y":240,"wires":[[]]},{"id":"f37d5c2a.dd9898","type":"debug","z":"8d282198.12b318","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":890,"y":680,"wires":[]},{"id":"1d82f1b0.690536","type":"comment","z":"8d282198.12b318","name":"","info":"<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <title>Licence Plate</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css\" />\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css\" />\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css\" />\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js\"></script>\n\n    <script type=\"text/javascript\">\n        $(function () {\n            var db = {{#payload}}{{{.}}}{{/payload}};\n                $(\"#jsgrid\").jsGrid({\n                    width: \"100%\",\n                    inserting: true,\n                    editing: true,\n                    sorting: true,\n                    paging: true,\n\n                    data: db,\n\n                    fields: [\n                        { title:\"Nom\", name: \"nom\", type: \"text\", width: 50 },\n                        { title:\"PrÃ©nom\", name: \"prenom\", type: \"text\", width: 50 },\n                        { title:\"Plaque\", name: \"immatriculation\", type: \"text\", width: 50 },\n                        { title:\"Heure\", name: \"heure\", type:\"number\", width: 25},\n                        { title:\"Minute\", align:\"left\",  name: \"minute\", type:\"number\" , width: 25},\n                        { type: \"control\" }\n                    ],\n               \n                    controller: {\n                        insertItem: function(item) {\n                            return $.ajax({\n                                type: \"POST\",\n                                url: \"/insert\",\n                                data: item\n                            });\n                        },\n                        updateItem: function(item) {\n                           return $.ajax({\n                                type: \"PUT\",\n                                url: \"/update\",\n                                data: item\n                            });\n                        },\n                        deleteItem: function(item) {\n                            return $.ajax({\n                                type: \"DELETE\",\n                                url: \"/delete\",\n                                data: item\n                            });\n                        }\n                    }   \n                });\n            });\n    \n  </script>\n</head>\n<body class=\"container\">\n    <section class=\"row\">\n        \n        <div class=\"col-md-6\"></div>\n        <div class=\"col-md-6\" id=\"jsgrid\">\n        </div>\n    </section>\n</body>\n</html>\n\n","x":960,"y":360,"wires":[]},{"id":"cd1116ac.35a968","type":"http response","z":"8d282198.12b318","name":"","x":910,"y":760,"wires":[]},{"id":"b2cde91a.1f913","type":"template","z":"8d282198.12b318","name":"Web Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <title>Licence Plate</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css\" />\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css\" />\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css\" />\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js\"></script>\n\n    <script type=\"text/javascript\">\n        $(function () {\n            var db = {{#payload}}{{{.}}}{{/payload}};\n                $(\"#jsgrid\").jsGrid({\n                    width: \"100%\",\n                    sorting: true,\n                    paging: true,\n                    filtering: false,\n                    autoload: true,\n                    data: db,\n                    controller: db,\n                    fields: [\n                        { title:\"Key\", name: \"Key\", type: \"text\", width: 100 },\n                        { title:\"Value\", name: \"Value\", type: \"text\", width: 100 }\n                     ]\n               \n\n                });\n            });\n    \n  </script>\n</head>\n<body class=\"container\">\n    <section class=\"row\">\n        \n        <div class=\"col-md-6\"></div>\n        <div class=\"col-md-6\" id=\"jsgrid\">\n        </div>\n    </section>\n</body>\n</html>\n\n","x":680,"y":760,"wires":[["cd1116ac.35a968"]]},{"id":"9bf5d710.fac738","type":"function","z":"8d282198.12b318","name":"","func":"\nmsg.payload = '[{\"Key\":\"ALLUSERSPROFILE\",\"Value\":\"C:\\ProgramData\"},{\"Key\":\"APPDATA\",\"Value\":\"C:\\Users\\MACIEJMARTUSEWICZ\\AppData\\Roaming\"},{\"Key\":\"asl.log\",\"Value\":\"Destination&#x3D;file\"}]';\n\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":760,"wires":[["b2cde91a.1f913"]]},{"id":"785c3442.74a11c","type":"http in","z":"8d282198.12b318","name":"","url":"/ttt","method":"get","upload":false,"swaggerDoc":"","x":140,"y":600,"wires":[["2245de56.4f0612"]]},{"id":"63682e31.2535c","type":"http response","z":"8d282198.12b318","name":"","x":1010,"y":600,"wires":[]},{"id":"6952dbc4.15e04c","type":"template","z":"8d282198.12b318","name":"Web Template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <title>Licence Plate</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css\" />\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"></script>\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.css\" />\n    <link type=\"text/css\" rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid-theme.min.css\" />\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/jsgrid/1.5.3/jsgrid.min.js\"></script>\n\n    <script type=\"text/javascript\">\n        $(function () {\n            var db = {{#payload}}{{{.}}}{{/payload}};\n                $(\"#jsgrid\").jsGrid({\n                    width: \"100%\",\n                    sorting: true,\n                    paging: true,\n                    filtering: false,\n                    autoload: true,\n                    data: db,\n                    controller: db,\n                    fields: [\n                        { title:\"Key\", name: \"Key\", type: \"text\", width: 100 },\n                        { title:\"Value\", name: \"Value\", type: \"text\", width: 100 }\n                     ]\n                });\n            });\n    \n  </script>\n</head>\n<body class=\"container\">\n    <section class=\"row\">\n        \n        <div class=\"col-md-6\"></div>\n        <div class=\"col-md-6\" id=\"jsgrid\">\n        </div>\n    </section>\n</body>\n</html>\n\n","x":780,"y":600,"wires":[["63682e31.2535c"]]},{"id":"2245de56.4f0612","type":"process-env","z":"8d282198.12b318","name":"","into":"payload","x":350,"y":600,"wires":[["9cbd9d07.2f771"]]},{"id":"9cbd9d07.2f771","type":"function","z":"8d282198.12b318","name":"","func":"//msg.payload = JSON.parse(msg.payload)\nvar data = Object.entries(msg.payload)\nvar newdata = []\n//for (var i = 0; i < data.length; i++) {\nfor (var i = 0; i < data.length; i++) {\n\n\nvar value = data[i][1]\n\nif (value[value.length - 1] === \"\\\\\") {\n    \n    value = value.slice(0, -1)\n    \n    \n}\n\n//newdata[i] = '{\"Key\":\"'+data[i][0]+'\",\"Value\":\"'+data[i][1].replace(/[&\\/\\\\#,+()$~%.'\":*?<>{}]/g,'.')+'\"}';\nnewdata[i] = '{\"Key\":\"'+data[i][0]+'\",\"Value\":\"'+value+'\"}';\n\n\n        }\nmsg.payload =   \"[\"+ newdata.toString()+\"]\"\n//msg.payload = JSON.stringify(newdata)\n//msg.payload = JSON.parse(newdata)\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":600,"wires":[["6952dbc4.15e04c","f37d5c2a.dd9898"]]},{"id":"aafcf4e9.fa957","type":"function","z":"8d282198.12b318","name":"","func":"//msg.payload = JSON.parse(msg.payload)\nvar data = Object.entries(msg.payload)\nvar newdata = []\n//for (var i = 0; i < data.length; i++) {\nfor (var i = 0; i < data.length; i++) {\n    \n    \n    \nnewdata[i] = '{\"Key\":\"'+data[i][0]+'\",\"Value\":\"'+data[i][1].replace('\\\"', '\"').substring(0, 64)+'\"}';\n\n\n\n        }\nmsg.payload =   \"[\"+ newdata.toString()+\"]\"\n//msg.payload = JSON.stringify(newdata)\n//msg.payload = JSON.parse(newdata)\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":460,"wires":[[]]}]